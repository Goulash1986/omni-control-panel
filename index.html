<!DOCTYPE html>
<html lang="ru" data-theme="cyber">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0">
<title>OMNI-CONTROL 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Mono:wght@400;700&family=Syne:wght@700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• THEMES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root,[data-theme="cyber"]{
  --bg:#070710;--bg2:#0d0d1a;--bg3:#13132a;--bg4:#1a1a35;
  --border:rgba(124,58,237,.2);--border2:rgba(124,58,237,.4);
  --accent:#7c3aed;--accent2:#a855f7;--accent3:#c084fc;
  --glow:rgba(124,58,237,.35);--glow2:rgba(168,85,247,.15);
  --green:#10b981;--red:#ef4444;--yellow:#f59e0b;--blue:#3b82f6;--pink:#ec4899;
  --text:#e8e8ff;--text2:#b0b0d0;--muted:#6060a0;
  --card:rgba(13,13,26,.95);--card-border:rgba(124,58,237,.18);
  --font-ui:'Space Mono',monospace;--font-display:'Bebas Neue',sans-serif;--font-body:'DM Sans',sans-serif;
}
[data-theme="ios-dark"]{
  --bg:#000;--bg2:#1c1c1e;--bg3:#2c2c2e;--bg4:#3a3a3c;
  --border:rgba(255,255,255,.1);--border2:rgba(255,255,255,.2);
  --accent:#0a84ff;--accent2:#30a0ff;--accent3:#64b5ff;
  --glow:rgba(10,132,255,.25);--glow2:rgba(10,132,255,.1);
  --green:#32d74b;--red:#ff453a;--yellow:#ffd60a;--blue:#0a84ff;--pink:#ff375f;
  --text:#fff;--text2:#ebebf5;--muted:#636366;
  --card:rgba(28,28,30,.98);--card-border:rgba(255,255,255,.08);
  --font-ui:'DM Sans',sans-serif;--font-display:'Bebas Neue',sans-serif;--font-body:'DM Sans',sans-serif;
}
[data-theme="ios-white"]{
  --bg:#f2f2f7;--bg2:#fff;--bg3:#f2f2f7;--bg4:#e5e5ea;
  --border:rgba(0,0,0,.12);--border2:rgba(0,0,0,.2);
  --accent:#007aff;--accent2:#3395ff;--accent3:#66afff;
  --glow:rgba(0,122,255,.15);--glow2:rgba(0,122,255,.06);
  --green:#34c759;--red:#ff3b30;--yellow:#ff9500;--blue:#007aff;--pink:#ff2d55;
  --text:#000;--text2:#3c3c43;--muted:#aeaeb2;
  --card:#fff;--card-border:rgba(0,0,0,.08);
  --font-ui:'DM Sans',sans-serif;--font-display:'Bebas Neue',sans-serif;--font-body:'DM Sans',sans-serif;
}
[data-theme="rose"]{
  --bg:#0f0812;--bg2:#1a0f20;--bg3:#26152e;--bg4:#321b3c;
  --border:rgba(236,72,153,.2);--border2:rgba(236,72,153,.4);
  --accent:#ec4899;--accent2:#f472b6;--accent3:#fbcfe8;
  --glow:rgba(236,72,153,.3);--glow2:rgba(236,72,153,.1);
  --green:#34d399;--red:#f87171;--yellow:#fbbf24;--blue:#60a5fa;--pink:#f9a8d4;
  --text:#fce7f3;--text2:#f9a8d4;--muted:#9d4d7a;
  --card:rgba(26,15,32,.95);--card-border:rgba(236,72,153,.15);
  --font-ui:'Space Mono',monospace;--font-display:'Bebas Neue',sans-serif;--font-body:'DM Sans',sans-serif;
}
[data-theme="white-rose"]{
  --bg:#fff5f8;--bg2:#fff;--bg3:#fef0f4;--bg4:#fde8ef;
  --border:rgba(236,72,153,.15);--border2:rgba(236,72,153,.3);
  --accent:#e91e8c;--accent2:#f06292;--accent3:#f48fb1;
  --glow:rgba(233,30,140,.12);--glow2:rgba(233,30,140,.06);
  --green:#00897b;--red:#e53935;--yellow:#f9a825;--blue:#1e88e5;--pink:#e91e8c;
  --text:#1a0010;--text2:#6d2b4a;--muted:#c48fa8;
  --card:#fff;--card-border:rgba(233,30,140,.12);
  --font-ui:'DM Sans',sans-serif;--font-display:'Bebas Neue',sans-serif;--font-body:'DM Sans',sans-serif;
}
[data-theme="aurora"]{
  --bg:#030810;--bg2:#061020;--bg3:#0a1830;--bg4:#0f2040;
  --border:rgba(0,200,255,.15);--border2:rgba(0,200,255,.3);
  --accent:#00c8ff;--accent2:#00f0a0;--accent3:#80f8ff;
  --glow:rgba(0,200,255,.25);--glow2:rgba(0,240,160,.1);
  --green:#00f0a0;--red:#ff4060;--yellow:#ffe040;--blue:#00c8ff;--pink:#ff60a0;
  --text:#c8f0ff;--text2:#80c8e0;--muted:#305060;
  --card:rgba(6,16,32,.95);--card-border:rgba(0,200,255,.15);
  --font-ui:'Space Mono',monospace;--font-display:'Bebas Neue',sans-serif;--font-body:'DM Sans',sans-serif;
}
[data-theme="lux"]{
  --bg:#0a0800;--bg2:#181200;--bg3:#241c00;--bg4:#302600;
  --border:rgba(212,160,23,.2);--border2:rgba(212,160,23,.4);
  --accent:#d4a017;--accent2:#f0c040;--accent3:#ffd700;
  --glow:rgba(212,160,23,.25);--glow2:rgba(212,160,23,.1);
  --green:#52b788;--red:#e63946;--yellow:#f0c040;--blue:#4895ef;--pink:#ff758f;
  --text:#f5e6b0;--text2:#c8a860;--muted:#705030;
  --card:rgba(24,18,0,.95);--card-border:rgba(212,160,23,.18);
  --font-ui:'Space Mono',monospace;--font-display:'Bebas Neue',sans-serif;--font-body:'DM Sans',sans-serif;
}
[data-theme="minimal"]{
  --bg:#fafafa;--bg2:#f5f5f5;--bg3:#eee;--bg4:#e0e0e0;
  --border:rgba(0,0,0,.1);--border2:rgba(0,0,0,.2);
  --accent:#111;--accent2:#333;--accent3:#555;
  --glow:rgba(0,0,0,.08);--glow2:rgba(0,0,0,.04);
  --green:#16a34a;--red:#dc2626;--yellow:#d97706;--blue:#2563eb;--pink:#db2777;
  --text:#111;--text2:#444;--muted:#999;
  --card:#fff;--card-border:rgba(0,0,0,.08);
  --font-ui:'DM Sans',sans-serif;--font-display:'Bebas Neue',sans-serif;--font-body:'DM Sans',sans-serif;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESET & BASE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
html,body{height:100%;overscroll-behavior:none;}
body{
  background:var(--bg);color:var(--text);
  font-family:var(--font-body);font-size:14px;
  min-height:100vh;overflow-x:hidden;
  transition:background .35s,color .35s;
}
body::after{
  content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
  background:radial-gradient(ellipse 60% 50% at 15% 15%,var(--glow),transparent 65%),
             radial-gradient(ellipse 50% 60% at 85% 85%,var(--glow2),transparent 65%);
}
[data-theme="ios-white"] body::after,[data-theme="white-rose"] body::after,[data-theme="minimal"] body::after{display:none;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QR LOCK SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#lockScreen{
  position:fixed;inset:0;z-index:9999;
  background:var(--bg);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:28px;padding:24px;
}
#lockScreen::before{
  content:'';position:absolute;inset:0;
  background:radial-gradient(ellipse 80% 60% at 50% 40%,var(--glow),transparent 70%);
  opacity:.6;
}
.lock-logo{
  font-family:var(--font-display);font-size:32px;letter-spacing:6px;
  background:linear-gradient(135deg,var(--accent2),var(--accent3),var(--blue));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  position:relative;z-index:1;
}
.lock-sub{font-size:12px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;position:relative;z-index:1;}
.qr-wrap{
  position:relative;z-index:1;
  background:var(--card);border:1px solid var(--border2);
  border-radius:24px;padding:20px;
  box-shadow:0 0 60px var(--glow),0 20px 60px rgba(0,0,0,.5);
  display:flex;flex-direction:column;align-items:center;gap:14px;
}
.qr-canvas-wrap{
  position:relative;width:200px;height:200px;
  background:#fff;border-radius:12px;overflow:hidden;
  display:flex;align-items:center;justify-content:center;
}
#qrCanvas{display:block;}
.qr-scan-line{
  position:absolute;left:0;right:0;height:2px;
  background:linear-gradient(90deg,transparent,var(--accent2),transparent);
  animation:scanLine 2s linear infinite;
  box-shadow:0 0 8px var(--accent);
}
@keyframes scanLine{0%{top:0;}100%{top:100%;}}
.qr-hint{font-size:11px;color:var(--muted);text-align:center;letter-spacing:.5px;line-height:1.5;}
.qr-hint strong{color:var(--accent2);}
.qr-divider{display:flex;align-items:center;gap:12px;width:100%;color:var(--muted);font-size:11px;}
.qr-divider::before,.qr-divider::after{content:'';flex:1;height:1px;background:var(--border);}
.pin-row{display:flex;gap:10px;justify-content:center;}
.pin-dot{
  width:14px;height:14px;border-radius:50%;
  border:2px solid var(--border2);
  transition:all .2s;
}
.pin-dot.filled{background:var(--accent);border-color:var(--accent);box-shadow:0 0 8px var(--glow);}
.pin-keypad{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;width:220px;}
.pin-key{
  height:56px;border-radius:14px;border:1px solid var(--border);
  background:var(--bg3);color:var(--text);
  font-family:var(--font-body);font-size:20px;font-weight:300;
  cursor:pointer;transition:all .15s;
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;
}
.pin-key:hover{background:var(--bg4);border-color:var(--border2);}
.pin-key:active{transform:scale(.92);background:var(--accent);color:#fff;}
.pin-key sub{font-size:8px;letter-spacing:1.5px;opacity:.5;text-transform:uppercase;}
.pin-key.del{font-size:16px;}
.pin-key.enter{background:var(--accent);color:#fff;border-color:var(--accent);}
.lock-err{color:var(--red);font-size:11px;text-align:center;min-height:16px;transition:all .3s;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#app{display:none;position:relative;z-index:1;}
.hdr{
  position:sticky;top:0;z-index:200;
  background:rgba(7,7,16,.94);backdrop-filter:blur(24px) saturate(200%);
  border-bottom:1px solid var(--border);
  height:56px;padding:0 16px;
  display:flex;align-items:center;justify-content:space-between;
}
[data-theme="ios-dark"] .hdr{background:rgba(0,0,0,.94);}
[data-theme="ios-white"] .hdr,[data-theme="white-rose"] .hdr,[data-theme="minimal"] .hdr{background:rgba(255,255,255,.94);}
[data-theme="rose"] .hdr{background:rgba(15,8,18,.94);}
[data-theme="aurora"] .hdr{background:rgba(3,8,16,.94);}
[data-theme="lux"] .hdr{background:rgba(10,8,0,.94);}

.logo{
  font-family:var(--font-display);font-size:22px;letter-spacing:4px;
  background:linear-gradient(135deg,var(--accent2) 0%,var(--accent3) 50%,var(--blue) 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
.hdr-r{display:flex;align-items:center;gap:10px;}

/* NOTIFICATION BELL */
.bell-btn{
  position:relative;width:38px;height:38px;border-radius:12px;
  border:1px solid var(--border);background:var(--bg3);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-size:16px;transition:all .2s;
}
.bell-btn:hover{border-color:var(--accent);background:var(--bg4);}
.bell-badge{
  position:absolute;top:-4px;right:-4px;
  min-width:18px;height:18px;padding:0 5px;
  background:var(--red);color:#fff;border-radius:9px;
  font-size:10px;font-weight:700;
  display:flex;align-items:center;justify-content:center;
  border:2px solid var(--bg);
}
.notif-panel{
  position:fixed;top:64px;right:12px;width:320px;
  background:var(--bg2);border:1px solid var(--border2);
  border-radius:20px;z-index:500;
  box-shadow:0 20px 60px rgba(0,0,0,.5);
  display:none;overflow:hidden;
  animation:dropIn .25s cubic-bezier(.34,1.56,.64,1);
}
@keyframes dropIn{from{opacity:0;transform:translateY(-10px) scale(.95);}to{opacity:1;transform:translateY(0) scale(1);}}
.notif-panel.open{display:block;}
.notif-hdr{
  padding:14px 16px;border-bottom:1px solid var(--border);
  font-size:12px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--muted);
  display:flex;align-items:center;justify-content:space-between;
}
.notif-clear{font-size:11px;color:var(--accent2);cursor:pointer;font-weight:400;letter-spacing:0;}
.notif-list{max-height:340px;overflow-y:auto;}
.notif-item{
  padding:12px 16px;border-bottom:1px solid var(--border);
  display:flex;gap:10px;align-items:flex-start;cursor:pointer;
  transition:background .15s;
}
.notif-item:hover{background:var(--bg3);}
.notif-item.unread{background:var(--glow2);}
.notif-icon{font-size:18px;flex-shrink:0;margin-top:2px;}
.notif-body{flex:1;}
.notif-text{font-size:12px;line-height:1.4;color:var(--text);}
.notif-time{font-size:10px;color:var(--muted);margin-top:3px;}
.notif-dot{width:7px;height:7px;border-radius:50%;background:var(--accent2);flex-shrink:0;margin-top:5px;}
.notif-empty{padding:24px;text-align:center;font-size:12px;color:var(--muted);}

.ldot{width:7px;height:7px;border-radius:50%;background:var(--green);box-shadow:0 0 8px var(--green);animation:lp 2s infinite;}
@keyframes lp{0%,100%{opacity:1;transform:scale(1);}50%{opacity:.5;transform:scale(1.5);}}
.hdr-btn{
  padding:7px 14px;border-radius:10px;border:1px solid var(--border);
  background:var(--bg3);color:var(--text2);
  font-family:var(--font-ui);font-size:11px;cursor:pointer;transition:all .2s;
}
.hdr-btn:hover{border-color:var(--accent);color:var(--text);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• NAV â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.nav{
  display:flex;gap:2px;padding:8px 12px;
  background:var(--bg2);border-bottom:1px solid var(--border);
  overflow-x:auto;scrollbar-width:none;
  position:sticky;top:56px;z-index:190;
}
.nav::-webkit-scrollbar{display:none;}
.nb{
  flex-shrink:0;padding:8px 14px;border:none;background:transparent;
  color:var(--muted);font-family:var(--font-ui);font-size:11px;font-weight:700;
  letter-spacing:.5px;text-transform:uppercase;cursor:pointer;
  border-radius:8px;transition:all .2s;white-space:nowrap;
}
.nb.active{background:var(--accent);color:#fff;box-shadow:0 0 14px var(--glow);}
.nb:not(.active):hover{color:var(--text);background:var(--bg3);}
.bdg{
  display:inline-flex;align-items:center;justify-content:center;
  min-width:18px;height:18px;padding:0 5px;border-radius:9px;
  background:var(--red);color:#fff;font-size:10px;font-weight:700;margin-left:4px;
  border:2px solid var(--bg2);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PAGES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.page{display:none;padding:20px;position:relative;z-index:1;animation:pi .2s ease;}
.page.active{display:block;}
@keyframes pi{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);}}
.sh{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;gap:10px;flex-wrap:wrap;}
.stit{font-family:var(--font-display);font-size:26px;letter-spacing:3px;}
.stit span{color:var(--accent2);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STAT GRID â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.g4{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:16px;}
@media(min-width:520px){.g4{grid-template-columns:repeat(4,1fr);}}
.stat{
  background:var(--card);border:1px solid var(--card-border);
  border-radius:14px;padding:14px;position:relative;overflow:hidden;
  transition:border-color .2s,transform .2s;
}
.stat:hover{transform:translateY(-2px);border-color:var(--border2);}
.stat::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--al,var(--accent));}
.sl{font-size:11px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:6px;}
.sv{font-family:var(--font-display);font-size:36px;letter-spacing:1px;line-height:1;}
.ss{font-size:11px;color:var(--muted);margin-top:4px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CATEGORY CHIPS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cbar{display:flex;gap:7px;overflow-x:auto;margin-bottom:14px;padding:2px 0;scrollbar-width:none;}
.cbar::-webkit-scrollbar{display:none;}
.chip{
  flex-shrink:0;padding:7px 15px;border:1px solid var(--border2);
  background:var(--bg3);color:var(--text2);border-radius:20px;
  font-family:var(--font-ui);font-size:11px;cursor:pointer;
  transition:all .2s;white-space:nowrap;
}
.chip.active,.chip:hover{background:var(--accent);color:#fff;border-color:var(--accent);box-shadow:0 0 12px var(--glow);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• iPHONE CARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px;}

/* Dead phone / add card */
.phone-add{
  position:relative;
  background:linear-gradient(160deg,var(--bg2),var(--bg3));
  border-radius:34px;
  border:1.5px solid var(--border);
  box-shadow:0 20px 60px rgba(0,0,0,.5),0 0 0 1px rgba(0,0,0,.2);
  overflow:hidden;cursor:pointer;
  transition:transform .3s cubic-bezier(.34,1.56,.64,1),box-shadow .3s,border-color .3s;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  min-height:320px;
  animation:ca .4s ease both;
}
.phone-add:hover{
  transform:translateY(-6px) scale(1.02);
  border-color:var(--border2);
  box-shadow:0 30px 80px rgba(0,0,0,.6),0 0 40px var(--glow);
}
.phone-add>*{position:relative;z-index:5;}
.phone-add::before{
  content:'';position:absolute;inset:0;border-radius:34px;pointer-events:none;
  background:linear-gradient(135deg,rgba(255,255,255,.06) 0%,transparent 50%);
}
.ph-screen{
  width:58%;aspect-ratio:9/18;
  background:#000;border-radius:22px;
  border:2px solid rgba(255,255,255,.06);
  display:flex;align-items:center;justify-content:center;
  position:relative;overflow:hidden;
  box-shadow:0 0 30px rgba(0,0,0,.8) inset,0 4px 20px rgba(0,0,0,.5);
}
.ph-notch{
  position:absolute;top:10px;left:50%;transform:translateX(-50%);
  width:50px;height:14px;background:#000;border-radius:7px;z-index:5;
}
.ph-screen-inner{
  display:flex;flex-direction:column;align-items:center;gap:8px;z-index:20;position:relative;
}
.ph-plus{
  font-size:36px;color:rgba(255,255,255,.15);
  transition:all .3s;text-shadow:0 0 20px rgba(0,0,0,.5);
}
.phone-add:hover .ph-plus{color:var(--accent2);text-shadow:0 0 20px var(--accent);}
.ph-label-sm{font-size:9px;color:rgba(255,255,255,.12);letter-spacing:2px;transition:all .3s;}
.phone-add:hover .ph-label-sm{color:rgba(168,85,247,.5);}
/* Screen flicker effect */
.ph-screen::after{
  content:'';position:absolute;inset:0;pointer-events:none;
  background:linear-gradient(135deg,transparent 30%,rgba(255,255,255,.02) 50%,transparent 70%);
  animation:flkr 5s infinite;
}
@keyframes flkr{
  0%,100%{opacity:0;}8%{opacity:1;}9%{opacity:0;}
  35%{opacity:0;}36%{opacity:.7;}37%{opacity:0;}
  70%{opacity:0;}71%{opacity:.4;}73%{opacity:0;}
  90%{opacity:0;}91%{opacity:.9;}92%{opacity:0;}
}
.ph-add-label{
  margin-top:14px;font-size:11px;color:var(--muted);
  letter-spacing:2px;text-transform:uppercase;position:relative;z-index:1;
}

/* Real iphone card */
.iphcard{
  position:relative;
  background:var(--card);
  border-radius:34px;
  border:1.5px solid rgba(255,255,255,.09);
  box-shadow:
    0 2px 0 rgba(255,255,255,.06) inset,
    0 -1px 0 rgba(0,0,0,.4) inset,
    0 20px 60px rgba(0,0,0,.55),
    0 0 0 1px rgba(0,0,0,.25),
    0 0 30px var(--glow2);
  overflow:hidden;
  transition:transform .3s cubic-bezier(.34,1.56,.64,1),box-shadow .3s;
  animation:ca .4s ease both;
}
@keyframes ca{from{opacity:0;transform:scale(.92) translateY(12px);}to{opacity:1;transform:scale(1) translateY(0);}}
.iphcard:hover{
  transform:translateY(-6px) scale(1.01);
  box-shadow:
    0 2px 0 rgba(255,255,255,.08) inset,
    0 -1px 0 rgba(0,0,0,.4) inset,
    0 30px 80px rgba(0,0,0,.65),
    0 0 0 1px rgba(0,0,0,.25),
    0 0 50px var(--glow);
}
.iphcard::before{
  content:'';position:absolute;inset:0;border-radius:34px;pointer-events:none;
  background:linear-gradient(135deg,rgba(255,255,255,.08) 0%,transparent 40%,transparent 60%,rgba(255,255,255,.02) 100%);
  z-index:10;
}
/* Dynamic island */
.di{
  position:absolute;top:11px;left:50%;transform:translateX(-50%);
  background:#000;border-radius:20px;
  width:82px;height:24px;z-index:15;
  display:flex;align-items:center;justify-content:center;gap:6px;
  box-shadow:0 0 0 1px rgba(255,255,255,.07);
  transition:width .3s cubic-bezier(.34,1.56,.64,1);
  overflow:hidden;
}
.iphcard:hover .di{width:120px;}
.di::before{content:'';width:9px;height:9px;border-radius:50%;background:#111;border:2px solid #222;flex-shrink:0;}
.di::after{content:'';width:5px;height:5px;border-radius:50%;background:var(--green);box-shadow:0 0 6px var(--green);animation:lp 2s infinite;flex-shrink:0;}
/* Poster */
.cposter{
  width:100%;aspect-ratio:16/9;
  background:linear-gradient(135deg,var(--bg3),var(--bg4));
  display:flex;align-items:center;justify-content:center;
  position:relative;overflow:hidden;margin-top:44px;
}
.cposter img{width:100%;height:100%;object-fit:cover;position:absolute;inset:0;}
.cpph{display:flex;flex-direction:column;align-items:center;gap:6px;opacity:.4;}
.cpph-icon{font-size:40px;}
.cpph-label{font-size:10px;color:var(--muted);letter-spacing:1px;}
.cposter::after{
  content:'';position:absolute;inset:0;pointer-events:none;
  background:linear-gradient(105deg,transparent 40%,rgba(255,255,255,.04) 50%,transparent 60%);
  animation:shimmer 4s infinite;
}
@keyframes shimmer{0%{transform:translateX(-100%);}100%{transform:translateX(200%);}}
/* Card body */
.cbody{padding:14px 16px 0;position:relative;z-index:11;}
.ccat{font-size:10px;color:var(--accent3);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:5px;}
.ctitle{font-family:'Syne',sans-serif;font-size:15px;font-weight:700;line-height:1.4;margin-bottom:7px;}
.ctext{font-size:12px;color:var(--text2);line-height:1.6;
  display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;
  margin-bottom:10px;white-space:pre-line;}
/* Inline btn preview with heatmap */
.cbtns{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:10px;}
.cbtnchip{
  padding:4px 10px;border-radius:6px;font-size:10px;
  background:var(--glow2);color:var(--accent3);
  border:1px solid var(--border);
  display:flex;align-items:center;gap:5px;
}
.cbtnchip .heat{
  font-size:9px;font-weight:700;
  padding:1px 5px;border-radius:4px;
  background:var(--accent);color:#fff;
}
.cbtnchip .heat.dead{background:var(--muted);opacity:.7;}
/* Ad meta */
.admeta{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:10px;}
.adtag{padding:4px 9px;border-radius:5px;font-size:10px;background:var(--bg3);color:var(--text2);border:1px solid var(--border);}
.adprice{padding:4px 9px;border-radius:5px;font-size:11px;font-weight:700;background:rgba(16,185,129,.1);color:var(--green);border:1px solid rgba(16,185,129,.2);}
/* Card actions */
.cact{display:flex;gap:6px;padding:12px 16px 16px;border-top:1px solid rgba(255,255,255,.04);position:relative;z-index:20;}
.cab{
  flex:1;padding:9px 4px;border-radius:11px;border:none;
  font-family:var(--font-ui);font-size:10px;font-weight:700;
  letter-spacing:.3px;text-transform:uppercase;cursor:pointer;transition:all .2s;
}
.csen{background:var(--accent);color:#fff;box-shadow:0 4px 12px var(--glow2);}
.csen:hover{background:var(--accent2);transform:scale(1.02);}
.cedt{background:var(--bg3);color:var(--text2);border:1px solid var(--border);}
.cedt:hover{border-color:var(--accent);color:var(--text);}
.cdel{background:rgba(239,68,68,.08);color:var(--red);border:1px solid rgba(239,68,68,.2);}
.cdel:hover{background:rgba(239,68,68,.18);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INFO CARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.ic{background:var(--card);border:1px solid var(--card-border);border-radius:18px;padding:18px;margin-bottom:14px;backdrop-filter:blur(10px);}
.ict{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:14px;display:flex;align-items:center;gap:10px;}
.icl{flex:1;height:1px;background:var(--border);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TABLE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.tbl{width:100%;border-collapse:collapse;}
.tbl th{font-size:10px;letter-spacing:1px;text-transform:uppercase;color:var(--muted);padding:10px 12px;text-align:left;border-bottom:1px solid var(--border);}
.tbl td{padding:12px;border-bottom:1px solid rgba(255,255,255,.03);vertical-align:middle;}
.tbl tr:last-child td{border-bottom:none;}
.tbl tr:hover td{background:var(--glow2);}
[data-theme="ios-white"] .tbl tr:hover td,[data-theme="white-rose"] .tbl tr:hover td,[data-theme="minimal"] .tbl tr:hover td{background:rgba(0,0,0,.02);}
.av{width:32px;height:32px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--blue));display:inline-flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;color:#fff;flex-shrink:0;}
.rl{padding:4px 9px;border-radius:6px;font-size:10px;font-weight:700;}
.rlo{background:rgba(168,85,247,.15);color:var(--accent2);border:1px solid rgba(168,85,247,.3);}
.rla{background:rgba(59,130,246,.12);color:var(--blue);border:1px solid rgba(59,130,246,.3);}
.rle{background:rgba(16,185,129,.12);color:var(--green);border:1px solid rgba(16,185,129,.2);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SHEET / MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.ov{position:fixed;inset:0;background:rgba(0,0,0,.75);display:flex;align-items:flex-end;justify-content:center;z-index:500;backdrop-filter:blur(16px);}
.shbox{background:var(--bg2);border:1px solid var(--border);border-radius:24px 24px 0 0;padding:20px 20px 32px;width:100%;max-width:640px;max-height:92vh;overflow-y:auto;animation:su .3s cubic-bezier(.34,1.56,.64,1);}
@keyframes su{from{transform:translateY(100%);}to{transform:translateY(0);}}
.sh-handle{width:40px;height:5px;border-radius:3px;background:var(--border2);margin:0 auto 18px;}
.sh-title{font-family:var(--font-display);font-size:24px;letter-spacing:2px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;}
.sh-close{background:none;border:none;color:var(--muted);font-size:22px;cursor:pointer;padding:4px;transition:color .2s;line-height:1;}
.sh-close:hover{color:var(--text);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FORM â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.fg{margin-bottom:16px;position:relative;}
.fl{font-size:11px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:7px;display:block;}
.fi,.fs,.fta{
  width:100%;background:var(--bg3);border:1px solid var(--border);
  border-radius:11px;padding:11px 14px;color:var(--text);
  font-family:var(--font-body);font-size:14px;outline:none;
  transition:border-color .2s,box-shadow .2s;
}
.fi:focus,.fs:focus,.fta:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--glow2);}
.fta{resize:vertical;min-height:88px;line-height:1.6;}
.fs option{background:var(--bg3);}
.fr2{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.fa{display:flex;gap:10px;margin-top:18px;flex-wrap:wrap;}

/* File drop */
.fdrop{
  border:2px dashed var(--border2);border-radius:14px;padding:22px 16px;
  text-align:center;cursor:pointer;transition:all .2s;background:var(--bg3);
}
.fdrop:hover,.fdrop.dragover{border-color:var(--accent);background:var(--glow2);}
.fdrop.has-file{border-color:var(--green);border-style:solid;background:rgba(16,185,129,.04);}
.fdrop-icon{font-size:28px;margin-bottom:6px;}
.fdrop-txt{font-size:12px;color:var(--muted);}
.prev-wrap{display:none;margin-top:10px;position:relative;}
.prev-wrap img{width:100%;border-radius:12px;max-height:200px;object-fit:cover;}
.prev-rm{position:absolute;top:8px;right:8px;background:rgba(0,0,0,.7);border:none;color:#fff;border-radius:50%;width:28px;height:28px;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center;}

/* AI suggest */
.ais{margin-top:10px;padding:12px 14px;background:var(--glow2);border:1px solid var(--border2);border-radius:10px;font-size:12px;line-height:1.6;color:var(--text2);display:none;position:relative;}
.ais.show{display:block;}
.ail{font-size:10px;color:var(--accent3);letter-spacing:1px;text-transform:uppercase;margin-bottom:6px;display:flex;align-items:center;gap:5px;}
.aiu{position:absolute;top:10px;right:10px;padding:4px 10px;border-radius:6px;border:none;background:var(--accent);color:#fff;font-size:10px;font-family:var(--font-ui);cursor:pointer;}

/* Inline btns editor */
.ibte{display:flex;flex-direction:column;gap:7px;}
.ibr{display:flex;gap:7px;align-items:center;}
.ibrm{background:none;border:none;color:var(--red);cursor:pointer;font-size:18px;padding:3px;flex-shrink:0;}
.ibadd{padding:8px;border:1px dashed var(--border2);border-radius:10px;background:transparent;color:var(--muted);font-size:12px;cursor:pointer;transition:all .2s;font-family:var(--font-ui);width:100%;margin-top:6px;}
.ibadd:hover{border-color:var(--accent);color:var(--accent3);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• BUTTONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn{padding:11px 20px;border-radius:11px;border:none;font-family:var(--font-ui);font-size:11px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;cursor:pointer;transition:all .2s;}
.bp{background:var(--accent);color:#fff;box-shadow:0 4px 15px var(--glow);}
.bp:hover{background:var(--accent2);transform:translateY(-1px);}
.bg-btn{background:var(--bg3);color:var(--text2);border:1px solid var(--border);}
.bg-btn:hover{border-color:var(--accent);color:var(--text);}
.bd-btn{background:rgba(239,68,68,.08);color:var(--red);border:1px solid rgba(239,68,68,.2);}
.bsm{padding:7px 13px;font-size:10px;}
.bfw{width:100%;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PROGRESS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.prr{display:flex;align-items:center;gap:12px;margin-bottom:10px;}
.prl{width:90px;font-size:11px;color:var(--muted);flex-shrink:0;}
.prw{flex:1;height:6px;background:var(--bg3);border-radius:3px;overflow:hidden;}
.prb{height:100%;border-radius:3px;transition:width 1.2s cubic-bezier(.4,0,.2,1);width:0;}
.prv{width:55px;text-align:right;font-size:11px;color:var(--muted);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CHART â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.chw{height:160px;position:relative;margin-top:10px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FINANCE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.frow{display:flex;justify-content:space-between;align-items:center;padding:11px 0;border-bottom:1px solid rgba(255,255,255,.04);}
.frow:last-child{border-bottom:none;}
.frl{font-size:12px;color:var(--muted);}
.frv{font-size:14px;font-weight:700;}
.frvg{color:var(--green);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PANIC â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.panic{border:2px solid rgba(239,68,68,.25);border-radius:18px;background:rgba(239,68,68,.04);padding:18px;margin-top:14px;}
.pbtn{width:100%;padding:16px;border-radius:14px;border:none;background:linear-gradient(135deg,#dc2626,#991b1b);color:#fff;font-family:var(--font-display);font-size:24px;letter-spacing:3px;cursor:pointer;transition:all .2s;box-shadow:0 4px 20px rgba(239,68,68,.3);}
.pbtn:hover{transform:scale(1.01);box-shadow:0 6px 30px rgba(239,68,68,.5);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• KANBAN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.kanban-nav{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;}
.kanban-title{font-family:var(--font-display);font-size:20px;letter-spacing:2px;}
.kanban-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;min-width:600px;}
.kanban-day-hdr{text-align:center;font-size:10px;color:var(--muted);letter-spacing:1px;padding:6px 2px;font-family:var(--font-ui);}
.kanban-cell{
  min-height:80px;border:1px dashed var(--border);border-radius:10px;
  padding:4px;background:var(--bg3);
  transition:background .2s,border-color .2s;
  position:relative;
}
.kanban-cell.today{border-color:var(--accent);background:var(--glow2);}
.kanban-cell.drag-over{background:var(--glow2);border-color:var(--accent2);border-style:solid;}
.kanban-date{font-size:10px;color:var(--muted);text-align:center;margin-bottom:4px;font-family:var(--font-ui);}
.kanban-item{
  padding:4px 6px;border-radius:6px;font-size:10px;
  background:var(--accent);color:#fff;
  margin-bottom:3px;cursor:grab;
  line-height:1.3;
  box-shadow:0 2px 6px var(--glow2);
  transition:transform .15s,box-shadow .15s;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}
.kanban-item:hover{transform:scale(1.02);box-shadow:0 4px 12px var(--glow);}
.kanban-item:active{cursor:grabbing;}
.kanban-item.ad{background:var(--green);}
.kanban-scroll{overflow-x:auto;padding-bottom:6px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• THEMES GRID â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.thgrid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin:14px 0;}
@media(max-width:480px){.thgrid{grid-template-columns:repeat(3,1fr);}}
.thcard{border:2px solid var(--border);border-radius:14px;padding:12px 8px;cursor:pointer;text-align:center;transition:all .25s;}
.thcard.active,.thcard:hover{border-color:var(--accent);transform:scale(1.04);}
.thprev{height:28px;border-radius:8px;margin-bottom:7px;}
.thname{font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--text2);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INBOX â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.urow{background:var(--glow2);}
.msrc{padding:3px 8px;border-radius:5px;font-size:10px;font-weight:700;}
.sig{background:rgba(236,72,153,.15);color:var(--pink);}
.stt{background:rgba(0,0,0,.35);color:var(--text2);border:1px solid var(--border);}
.stg{background:rgba(59,130,246,.15);color:var(--blue);}
.swrn{background:rgba(239,68,68,.15);color:var(--red);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SETUP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sov{position:fixed;inset:0;background:rgba(0,0,0,.92);display:flex;align-items:center;justify-content:center;z-index:9998;backdrop-filter:blur(20px);}
.sbox{background:var(--bg2);border:1px solid var(--border);border-radius:22px;padding:30px;width:90%;max-width:380px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOAST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast-el{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(80px);background:var(--bg3);border:1px solid var(--border2);border-radius:14px;padding:12px 22px;font-size:12px;font-family:var(--font-ui);color:var(--text);z-index:9997;transition:transform .3s cubic-bezier(.34,1.56,.64,1);box-shadow:0 8px 30px rgba(0,0,0,.4);white-space:nowrap;pointer-events:none;}
.toast-el.show{transform:translateX(-50%) translateY(0);}

/* SCROLLBAR */
::-webkit-scrollbar{width:3px;height:3px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:var(--border2);border-radius:2px;}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LOCK SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lockScreen">
  <div class="lock-logo">OMNIÂ·CONTROL</div>
  <div class="lock-sub">Secure Admin Panel Â· 2026</div>
  <div class="qr-wrap">
    <div style="font-size:11px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:2px">Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€ÑƒĞ¹ QR Ğ¸Ğ»Ğ¸ Ğ²Ğ²ĞµĞ´Ğ¸ PIN</div>
    <div class="qr-canvas-wrap">
      <canvas id="qrCanvas" width="180" height="180"></canvas>
      <div class="qr-scan-line"></div>
    </div>
    <div class="qr-hint">ĞÑ‚ĞºÑ€Ğ¾Ğ¹ Telegram â†’ <strong>@omni_control_bot</strong><br>Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸ <strong>/auth</strong> Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ ÑÑÑ‹Ğ»ĞºĞ¸</div>
    <div class="qr-divider">Ğ¸Ğ»Ğ¸ PIN</div>
    <div class="pin-row" id="pinDots">
      <div class="pin-dot" id="pd0"></div>
      <div class="pin-dot" id="pd1"></div>
      <div class="pin-dot" id="pd2"></div>
      <div class="pin-dot" id="pd3"></div>
    </div>
    <div class="pin-keypad" id="pinKeypad">
      <button class="pin-key" onclick="pinPress('1')">1<sub></sub></button>
      <button class="pin-key" onclick="pinPress('2')">2<sub>ABC</sub></button>
      <button class="pin-key" onclick="pinPress('3')">3<sub>DEF</sub></button>
      <button class="pin-key" onclick="pinPress('4')">4<sub>GHI</sub></button>
      <button class="pin-key" onclick="pinPress('5')">5<sub>JKL</sub></button>
      <button class="pin-key" onclick="pinPress('6')">6<sub>MNO</sub></button>
      <button class="pin-key" onclick="pinPress('7')">7<sub>PQRS</sub></button>
      <button class="pin-key" onclick="pinPress('8')">8<sub>TUV</sub></button>
      <button class="pin-key" onclick="pinPress('9')">9<sub>WXYZ</sub></button>
      <button class="pin-key" onclick="pinPress('')" style="font-size:12px;color:var(--muted)">âš™</button>
      <button class="pin-key" onclick="pinPress('0')">0<sub></sub></button>
      <button class="pin-key del" onclick="pinDel()">âŒ«</button>
    </div>
    <div class="lock-err" id="lockErr"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• APP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="app">

<header class="hdr">
  <div class="logo">OMNIÂ·CTRL</div>
  <div class="hdr-r">
    <div class="ldot"></div>
    <!-- Notification Bell -->
    <div class="bell-btn" onclick="toggleNotif()" id="bellBtn">
      ğŸ””
      <div class="bell-badge" id="bellBadge">0</div>
    </div>
    <button class="hdr-btn" onclick="showSetup()">âš™ API</button>
    <button class="hdr-btn" onclick="doLogout()" style="color:var(--red);border-color:rgba(239,68,68,.3)">ğŸ”’</button>
  </div>
</header>

<!-- Notification Panel -->
<div class="notif-panel" id="notifPanel">
  <div class="notif-hdr">
    Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
    <span class="notif-clear" onclick="clearNotifs()">ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ</span>
  </div>
  <div class="notif-list" id="notifList">
    <div class="notif-empty">ĞĞµÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹</div>
  </div>
</div>

<nav class="nav">
  <button class="nb active" onclick="gp('dash',this)">ğŸ“Š Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´</button>
  <button class="nb" onclick="gp('content',this)">ğŸ“¦ ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚</button>
  <button class="nb" onclick="gp('kanban',this)">ğŸ“… ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ</button>
  <button class="nb" onclick="gp('ads',this)">ğŸ’¼ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ°</button>
  <button class="nb" onclick="gp('hero',this)">ğŸŒŸ ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶</button>
  <button class="nb" onclick="gp('team',this)">ğŸ‘¥ ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°</button>
  <button class="nb" onclick="gp('inbox',this)">ğŸ“¨ Ğ˜Ğ½Ğ±Ğ¾ĞºÑ<span class="bdg" id="inbBdg">0</span></button>
  <button class="nb" onclick="gp('finance',this)">ğŸ’° Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑÑ‹</button>
  <button class="nb" onclick="gp('settings',this)">âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸</button>
</nav>

<!-- â–ˆâ–ˆâ–ˆâ–ˆ DASHBOARD â–ˆâ–ˆâ–ˆâ–ˆ -->
<div id="page-dash" class="page active">
  <div class="sh"><div class="stit">Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´ <span>2026</span></div></div>
  <div class="g4">
    <div class="stat" style="--al:var(--accent2)"><div class="sl">ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚</div><div class="sv" id="dsp">0</div><div class="ss">ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº</div></div>
    <div class="stat" style="--al:var(--green)"><div class="sl">Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ°</div><div class="sv" id="dsa">0</div><div class="ss">Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ…</div></div>
    <div class="stat" style="--al:var(--pink)"><div class="sl">Ğ”Ğ¾Ñ…Ğ¾Ğ´</div><div class="sv" id="dsinc">0</div><div class="ss">UAH</div></div>
    <div class="stat" style="--al:var(--yellow)"><div class="sl">Ğ˜Ğ½Ğ±Ğ¾ĞºÑ</div><div class="sv" id="dsr">0</div><div class="ss">Ğ½Ğ¾Ğ²Ñ‹Ñ…</div></div>
  </div>
  <div class="ic"><div class="ict">ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾ÑÑ‚Ğ¸Ğ½Ğ³Ğ° <span class="icl"></span></div><div class="chw"><canvas id="cDash"></canvas></div></div>
  <div class="ic">
    <div class="ict">ROI Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñ‹ <span class="icl"></span></div>
    <div class="prr"><div class="prl">Impressions</div><div class="prw"><div class="prb" id="bI" style="background:var(--accent2)"></div></div><div class="prv" id="vI">â€”</div></div>
    <div class="prr"><div class="prl">Clicks</div><div class="prw"><div class="prb" id="bC" style="background:var(--blue)"></div></div><div class="prv" id="vC">â€”</div></div>
    <div class="prr"><div class="prl">CTR</div><div class="prw"><div class="prb" id="bT" style="background:var(--green)"></div></div><div class="prv" id="vT">â€”</div></div>
  </div>
  <div class="panic">
    <div style="font-size:11px;color:var(--muted);text-align:center;margin-bottom:12px;letter-spacing:1px">Ğ­ĞšĞ¡Ğ¢Ğ Ğ•ĞĞĞĞ¯ ĞĞ¡Ğ¢ĞĞĞĞ’ĞšĞ Ğ’Ğ¡Ğ•Ğ¥ ĞŸĞ£Ğ‘Ğ›Ğ˜ĞšĞĞ¦Ğ˜Ğ™</div>
    <button class="pbtn" onclick="doPanic()">ğŸš¨ PANIC MODE</button>
  </div>
</div>

<!-- â–ˆâ–ˆâ–ˆâ–ˆ CONTENT â–ˆâ–ˆâ–ˆâ–ˆ -->
<div id="page-content" class="page">
  <div class="sh">
    <div class="stit">ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚</div>
    <button class="btn bg-btn bsm" onclick="openCats()">âš™ï¸ ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸</button>
  </div>
  <div class="cbar" id="conCatBar"></div>
  <div class="cgrid" id="contentCards"></div>
</div>

<!-- â–ˆâ–ˆâ–ˆâ–ˆ KANBAN CALENDAR â–ˆâ–ˆâ–ˆâ–ˆ -->
<div id="page-kanban" class="page">
  <div class="kanban-nav">
    <button class="btn bg-btn bsm" onclick="kbPrev()">â† ĞĞ°Ğ·Ğ°Ğ´</button>
    <div>
      <div class="kanban-title" id="kbTitle"></div>
      <div style="font-size:10px;color:var(--muted);text-align:center;letter-spacing:1px">ĞŸĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸</div>
    </div>
    <button class="btn bg-btn bsm" onclick="kbNext()">Ğ’Ğ¿ĞµÑ€Ñ‘Ğ´ â†’</button>
  </div>
  <div class="kanban-scroll">
    <div class="kanban-grid" id="kbGrid">
      <div class="kanban-day-hdr">ĞŸĞ½</div><div class="kanban-day-hdr">Ğ’Ñ‚</div><div class="kanban-day-hdr">Ğ¡Ñ€</div>
      <div class="kanban-day-hdr">Ğ§Ñ‚</div><div class="kanban-day-hdr">ĞŸÑ‚</div><div class="kanban-day-hdr">Ğ¡Ğ±</div><div class="kanban-day-hdr">Ğ’Ñ</div>
    </div>
  </div>
</div>

<!-- â–ˆâ–ˆâ–ˆâ–ˆ ADS â–ˆâ–ˆâ–ˆâ–ˆ -->
<div id="page-ads" class="page">
  <div class="sh"><div class="stit">Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ°</div></div>
  <div class="g4" style="margin-bottom:14px">
    <div class="stat" style="--al:var(--green)"><div class="sl">Ğ’ ĞºĞ°Ğ½Ğ°Ğ»Ğµ</div><div class="sv" id="adAct">0</div></div>
    <div class="stat" style="--al:var(--yellow)"><div class="sl">Ğ’ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸</div><div class="sv" id="adPen">0</div></div>
    <div class="stat" style="--al:var(--muted)"><div class="sl">Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°</div><div class="sv" id="adDon">0</div></div>
    <div class="stat" style="--al:var(--green)"><div class="sl">Ğ”Ğ¾Ñ…Ğ¾Ğ´</div><div class="sv" id="adInc">0</div></div>
  </div>
  <div class="cbar" id="adFilterBar">
    <div class="chip active" onclick="fAds('all',this)">Ğ’ÑĞµ</div>
    <div class="chip" onclick="fAds('active',this)">ğŸ“¢ Ğ’ ĞºĞ°Ğ½Ğ°Ğ»Ğµ</div>
    <div class="chip" onclick="fAds('pending',this)">â³ Ğ’ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸</div>
    <div class="chip" onclick="fAds('done',this)">âœ… Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°</div>
  </div>
  <div class="cgrid" id="adsCards"></div>
</div>

<!-- â–ˆâ–ˆâ–ˆâ–ˆ HERO â–ˆâ–ˆâ–ˆâ–ˆ -->
<div id="page-hero" class="page">
  <div class="sh"><div class="stit">ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶</div></div>
  <div style="font-size:12px;color:var(--muted);margin-bottom:16px;line-height:1.6">Ğ”Ğ¾ 6 ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº â€” Ğ±Ğ¾Ñ‚ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½ÑƒÑ Ğ½Ğ°Ğ´ Ğ¿ÑƒĞ»ÑŒÑ‚Ğ¾Ğ¼. ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾: <strong id="hcount" style="color:var(--accent2)">0</strong>/6</div>
  <div class="cgrid" id="heroCards"></div>
</div>

<!-- â–ˆâ–ˆâ–ˆâ–ˆ TEAM â–ˆâ–ˆâ–ˆâ–ˆ -->
<div id="page-team" class="page">
  <div class="stit" style="margin-bottom:16px">ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°</div>
  <div id="reqBlock" style="display:none">
    <div class="ic" style="border-color:rgba(245,158,11,.3)">
      <div class="ict" style="color:var(--yellow)">âš  Ğ—Ğ°ÑĞ²ĞºĞ¸ Ğ½Ğ° Ğ²ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ <span class="icl"></span></div>
      <div id="reqList"></div>
    </div>
  </div>
  <div class="ic" style="padding:0;overflow:hidden">
    <table class="tbl">
      <thead><tr><th>Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸Ğº</th><th>Ğ Ğ¾Ğ»ÑŒ</th><th>Telegram ID</th><th>Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½</th><th>Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ</th></tr></thead>
      <tbody id="teamTbl"></tbody>
    </table>
  </div>
</div>

<!-- â–ˆâ–ˆâ–ˆâ–ˆ INBOX â–ˆâ–ˆâ–ˆâ–ˆ -->
<div id="page-inbox" class="page">
  <div class="sh"><div class="stit">Ğ˜Ğ½Ğ±Ğ¾ĞºÑ</div></div>
  <div class="ic" style="padding:16px;margin-bottom:14px;">
    <div style="font-size:12px;color:var(--muted);line-height:1.7;">
      ğŸ“Œ Ğ˜Ğ½Ğ±Ğ¾ĞºÑ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ ÑĞ¾Ñ†ÑĞµÑ‚ĞµĞ¹ Ñ‡ĞµÑ€ĞµĞ· API Ğ±ÑĞºĞµĞ½Ğ´.<br>
      ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸: <strong style="color:var(--accent2)">Instagram Â· TikTok Â· Telegram Â· Ğ¢Ğ¸Ñ€Ñ</strong><br>
      ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ Ğ² ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ÑÑ… (Ğ¼Ğ°Ñ‚, ÑÑÑ‹Ğ»ĞºĞ¸) Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ´ÑÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸.
    </div>
  </div>
  <div class="cbar" id="inboxFilterBar">
    <div class="chip active" onclick="fInbox('all',this)">Ğ’ÑĞµ</div>
    <div class="chip" onclick="fInbox('unread',this)">ğŸ”µ ĞĞ¾Ğ²Ñ‹Ğµ</div>
    <div class="chip" onclick="fInbox('warn',this)">âš ï¸ ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ</div>
    <div class="chip" onclick="fInbox('starred',this)">â­ Ğ’Ğ°Ğ¶Ğ½Ñ‹Ğµ</div>
    <div class="chip" onclick="fInbox('archived',this)">ĞÑ€Ñ…Ğ¸Ğ²</div>
  </div>
  <div class="ic" style="padding:0;overflow:hidden">
    <table class="tbl">
      <thead><tr><th>ĞÑ‚ ĞºĞ¾Ğ³Ğ¾</th><th>Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ</th><th>Ğ¡Ğ¾Ñ†ÑĞµÑ‚ÑŒ</th><th>Ğ’Ñ€ĞµĞ¼Ñ</th><th></th></tr></thead>
      <tbody id="inboxTbl"></tbody>
    </table>
  </div>
</div>

<!-- â–ˆâ–ˆâ–ˆâ–ˆ FINANCE â–ˆâ–ˆâ–ˆâ–ˆ -->
<div id="page-finance" class="page">
  <div class="stit" style="margin-bottom:16px">Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑÑ‹</div>
  <div class="g4">
    <div class="stat" style="--al:var(--green)"><div class="sl">Ğ”Ğ¾Ñ…Ğ¾Ğ´</div><div class="sv" id="fInc">0</div><div class="ss" style="color:var(--green)">UAH</div></div>
    <div class="stat" style="--al:var(--red)"><div class="sl">Ğ Ğ°ÑÑ…Ğ¾Ğ´Ñ‹</div><div class="sv" id="fExp">0</div></div>
    <div class="stat" style="--al:var(--accent2)"><div class="sl">ĞŸÑ€Ğ¸Ğ±Ñ‹Ğ»ÑŒ</div><div class="sv" id="fPro">0</div></div>
    <div class="stat" style="--al:var(--blue)"><div class="sl">ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹</div><div class="sv" id="fCam">0</div></div>
  </div>
  <div class="ic"><div class="ict">ĞŸĞ¾ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°Ğ¼ <span class="icl"></span></div><div id="finTable"><div style="color:var(--muted);font-size:12px;padding:10px 0">ĞĞµÑ‚ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ½Ñ‹Ñ… ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹</div></div></div>
  <div class="ic">
    <div class="ict">Ğ¡Ğ²Ğ¾Ğ´ĞºĞ° <span class="icl"></span></div>
    <div class="frow"><div class="frl">ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñ‹</div><div class="frv frvg" id="fTot">0 UAH</div></div>
    <div class="frow"><div class="frl">Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ±ÑĞ´Ğ¶ĞµÑ‚</div><div class="frv" id="fAvg">0 UAH</div></div>
    <div class="frow"><div class="frl">ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹</div><div class="frv" id="fAct2">0</div></div>
    <div class="frow"><div class="frl">Ğ—Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ñ‹Ñ…</div><div class="frv" id="fDone">0</div></div>
  </div>
</div>

<!-- â–ˆâ–ˆâ–ˆâ–ˆ SETTINGS â–ˆâ–ˆâ–ˆâ–ˆ -->
<div id="page-settings" class="page">
  <div class="stit" style="margin-bottom:16px">ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸</div>
  <div class="ic">
    <div class="ict">Ğ¢ĞµĞ¼Ğ° Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ñ <span class="icl"></span></div>
    <div class="thgrid" id="themeGrid"></div>
  </div>
  <div class="ic">
    <div class="ict">ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ <span class="icl"></span></div>
    <div class="fg"><label class="fl">Username Ğ±Ğ¾Ñ‚Ğ°</label><input class="fi" id="set-bn" placeholder="@YourBot"></div>
    <div class="fg"><label class="fl">ID ĞºĞ°Ğ½Ğ°Ğ»Ğ°</label><input class="fi" id="set-ch" placeholder="-1001234567890"></div>
    <div class="fg"><label class="fl">Ğ¯Ğ·Ñ‹Ğº Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°</label>
      <select class="fs" id="set-lg">
        <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
        <option value="uk">ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
        <option value="en">ğŸ‡¬ğŸ‡§ English</option>
      </select>
    </div>
    <button class="btn bp bsm" onclick="toast('âœ… Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾!')">ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ</button>
  </div>
  <div class="ic">
    <div class="ict">Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ <span class="icl"></span></div>
    <div class="frow"><div class="frl">ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ Ğ² ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ÑÑ…</div><label style="cursor:pointer"><input type="checkbox" checked id="n1"> Ğ’ĞºĞ»</label></div>
    <div class="frow"><div class="frl">ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾ÑÑ‚/Ñ€Ğ¸Ğ»Ñ Ğ² ÑĞ¾Ñ†ÑĞµÑ‚ÑÑ…</div><label style="cursor:pointer"><input type="checkbox" checked id="n2"> Ğ’ĞºĞ»</label></div>
    <div class="frow"><div class="frl">Ğ¡Ñ‚Ğ°Ñ€Ñ‚ ÑÑ‚Ñ€Ğ¸Ğ¼Ğ°</div><label style="cursor:pointer"><input type="checkbox" checked id="n3"> Ğ’ĞºĞ»</label></div>
    <div class="frow"><div class="frl">Ğ—Ğ°ÑĞ²ĞºĞ¸ Ğ² ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ</div><label style="cursor:pointer"><input type="checkbox" checked id="n4"> Ğ’ĞºĞ»</label></div>
  </div>
  <div class="ic">
    <div class="ict">Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ <span class="icl"></span></div>
    <div class="fg"><label class="fl">Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ PIN (4 Ñ†Ğ¸Ñ„Ñ€Ñ‹)</label><input class="fi" id="new-pin" type="password" maxlength="4" placeholder="â€¢â€¢â€¢â€¢"></div>
    <button class="btn bp bsm" onclick="changePin()">ğŸ”‘ Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ PIN</button>
  </div>
</div>

</div><!-- /app -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SHEETS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<!-- POST SHEET -->
<div id="ov-post" class="ov" style="display:none" onclick="if(event.target===this)cls('ov-post')">
<div class="shbox">
  <div class="sh-handle"></div>
  <div class="sh-title">ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° <button class="sh-close" onclick="cls('ov-post')">âœ•</button></div>
  <input type="hidden" id="post-eid">
  <div class="fg"><label class="fl">ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ</label><select class="fs" id="post-cat"></select></div>
  <div class="fg">
    <label class="fl">ĞŸĞ¾ÑÑ‚ĞµÑ€</label>
    <div class="fdrop" id="post-fdrop" onclick="g('post-file').click()">
      <div class="fdrop-icon">ğŸ–¼</div>
      <div class="fdrop-txt">ĞĞ°Ğ¶Ğ¼Ğ¸ Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ (JPG/PNG/WEBP)</div>
    </div>
    <input type="file" id="post-file" accept="image/*" style="display:none" onchange="handleFile(this,'post-fdrop','post-purl','post-prev')">
    <input type="hidden" id="post-purl">
    <div class="prev-wrap" id="post-prev"><img id="post-prev-img" src=""><button class="prev-rm" onclick="clearFile('post-file','post-fdrop','post-purl','post-prev')">âœ•</button></div>
  </div>
  <div class="fg">
    <label class="fl">Ğ¢ĞµĞºÑÑ‚ Ğ¿Ğ¾ÑÑ‚Ğ°</label>
    <textarea class="fta" id="post-text" placeholder="ĞĞ°Ğ¿Ğ¸ÑˆĞ¸ Ñ‚ĞµĞºÑÑ‚..." oninput="aiSug(this,'ais-post','aisp-txt')"></textarea>
    <div class="ais" id="ais-post">
      <div class="ail">ğŸ¤– Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ AI <span style="opacity:.5">(Ğ½Ğ°Ğ¶Ğ¼Ğ¸ Â«Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒÂ»)</span></div>
      <div id="aisp-txt" style="white-space:pre-line;margin-bottom:4px"></div>
      <button class="aiu" onclick="useAi('post-text','ais-post','aisp-txt')">Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button>
    </div>
  </div>
  <div class="fg">
    <label class="fl">Inline-ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ (Ğ½ĞµĞ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)</label>
    <div class="ibte" id="post-btns">
      <div class="ibr">
        <input class="fi" placeholder="Ğ¢ĞµĞºÑÑ‚ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸" style="flex:1">
        <input class="fi" placeholder="URL" style="flex:1.5">
        <button class="ibrm" onclick="this.closest('.ibr').remove()">âœ•</button>
      </div>
    </div>
    <button class="ibadd" onclick="addBtn('post-btns')">+ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ</button>
  </div>
  <div class="fa">
    <button class="btn bp" onclick="savePost()">ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ</button>
    <button class="btn bg-btn" onclick="cls('ov-post')">ĞÑ‚Ğ¼ĞµĞ½Ğ°</button>
  </div>
</div></div>

<!-- AD SHEET -->
<div id="ov-ad" class="ov" style="display:none" onclick="if(event.target===this)cls('ov-ad')">
<div class="shbox">
  <div class="sh-handle"></div>
  <div class="sh-title">Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ğ°Ñ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ <button class="sh-close" onclick="cls('ov-ad')">âœ•</button></div>
  <input type="hidden" id="ad-eid">
  <div class="fg">
    <label class="fl">ĞŸĞ¾ÑÑ‚ĞµÑ€</label>
    <div class="fdrop" id="ad-fdrop" onclick="g('ad-file').click()">
      <div class="fdrop-icon">ğŸ–¼</div>
      <div class="fdrop-txt">ĞĞ°Ğ¶Ğ¼Ğ¸ Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ</div>
    </div>
    <input type="file" id="ad-file" accept="image/*" style="display:none" onchange="handleFile(this,'ad-fdrop','ad-purl','ad-prev')">
    <input type="hidden" id="ad-purl">
    <div class="prev-wrap" id="ad-prev"><img id="ad-prev-img" src=""><button class="prev-rm" onclick="clearFile('ad-file','ad-fdrop','ad-purl','ad-prev')">âœ•</button></div>
  </div>
  <div class="fg">
    <label class="fl">Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚</label>
    <textarea class="fta" id="ad-text" placeholder="Ğ¢ĞµĞºÑÑ‚ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñ‹..." oninput="aiSug(this,'ais-ad','aisa-txt')"></textarea>
    <div class="ais" id="ais-ad"><div class="ail">ğŸ¤– Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ AI</div><div id="aisa-txt" style="white-space:pre-line;margin-bottom:4px"></div><button class="aiu" onclick="useAi('ad-text','ais-ad','aisa-txt')">Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
  </div>
  <div class="fr2">
    <div class="fg"><label class="fl">Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ¾Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ</label><input class="fi" id="ad-client" placeholder="ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ / Ğ˜ĞŸ"></div>
    <div class="fg"><label class="fl">ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚</label><input class="fi" id="ad-contact" placeholder="@username"></div>
  </div>
  <div class="fr2">
    <div class="fg"><label class="fl">Ğ¦ĞµĞ½Ğ°</label><input class="fi" id="ad-price" type="number" placeholder="1000"></div>
    <div class="fg"><label class="fl">Ğ’Ğ°Ğ»ÑÑ‚Ğ°</label><select class="fs" id="ad-cur"><option>UAH</option><option>USD</option><option>EUR</option></select></div>
  </div>
  <div class="fr2">
    <div class="fg"><label class="fl">Ğ”Ğ°Ñ‚Ğ° Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸</label><input class="fi" type="datetime-local" id="ad-pub"></div>
    <div class="fg"><label class="fl">ĞĞ²Ñ‚Ğ¾-ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ</label>
      <select class="fs" id="ad-del"><option value="0">ĞĞµ ÑƒĞ´Ğ°Ğ»ÑÑ‚ÑŒ</option><option value="1">1 Ñ‡Ğ°Ñ</option><option value="6">6 Ñ‡Ğ°ÑĞ¾Ğ²</option><option value="24">24 Ñ‡Ğ°ÑĞ°</option><option value="72">3 Ğ´Ğ½Ñ</option></select>
    </div>
  </div>
  <div class="fa"><button class="btn bp" onclick="saveAd()">ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ</button><button class="btn bg-btn" onclick="cls('ov-ad')">ĞÑ‚Ğ¼ĞµĞ½Ğ°</button></div>
</div></div>

<!-- HERO SHEET -->
<div id="ov-hero" class="ov" style="display:none" onclick="if(event.target===this)cls('ov-hero')">
<div class="shbox">
  <div class="sh-handle"></div>
  <div class="sh-title">ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° <button class="sh-close" onclick="cls('ov-hero')">âœ•</button></div>
  <input type="hidden" id="hero-eid">
  <div class="fg">
    <label class="fl">ĞŸĞ¾ÑÑ‚ĞµÑ€ / Ğ¤Ğ¾Ñ‚Ğ¾</label>
    <div class="fdrop" id="hero-fdrop" onclick="g('hero-file').click()">
      <div class="fdrop-icon">ğŸŒŸ</div>
      <div class="fdrop-txt">ĞĞ°Ğ¶Ğ¼Ğ¸ Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ</div>
    </div>
    <input type="file" id="hero-file" accept="image/*" style="display:none" onchange="handleFile(this,'hero-fdrop','hero-purl','hero-prev')">
    <input type="hidden" id="hero-purl">
    <div class="prev-wrap" id="hero-prev"><img id="hero-prev-img" src=""><button class="prev-rm" onclick="clearFile('hero-file','hero-fdrop','hero-purl','hero-prev')">âœ•</button></div>
  </div>
  <div class="fg"><label class="fl">Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº / Ğ¡Ğ»Ğ¾Ğ³Ğ°Ğ½</label><input class="fi" id="hero-title" placeholder="Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ!"></div>
  <div class="fg">
    <label class="fl">Ğ¢ĞµĞºÑÑ‚</label>
    <textarea class="fta" id="hero-text" placeholder="Ğ¢ĞµĞºÑÑ‚ ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ..." oninput="aiSug(this,'ais-hero','aish-txt')"></textarea>
    <div class="ais" id="ais-hero"><div class="ail">ğŸ¤– Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ AI</div><div id="aish-txt" style="white-space:pre-line;margin-bottom:4px"></div><button class="aiu" onclick="useAi('hero-text','ais-hero','aish-txt')">Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
  </div>
  <div class="fg"><label class="fl">Emoji</label><input class="fi" id="hero-emoji" placeholder="ğŸ”¥" maxlength="4" style="width:90px"></div>
  <div class="fa"><button class="btn bp" onclick="saveHero()">ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ</button><button class="btn bg-btn" onclick="cls('ov-hero')">ĞÑ‚Ğ¼ĞµĞ½Ğ°</button></div>
</div></div>

<!-- CATS SHEET -->
<div id="ov-cats" class="ov" style="display:none" onclick="if(event.target===this)cls('ov-cats')">
<div class="shbox">
  <div class="sh-handle"></div>
  <div class="sh-title">ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° <button class="sh-close" onclick="cls('ov-cats')">âœ•</button></div>
  <div id="cats-list" style="margin-bottom:16px"></div>
  <div style="border-top:1px solid var(--border);padding-top:16px">
    <div style="font-size:11px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:10px">ĞĞ¾Ğ²Ğ°Ñ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ</div>
    <div class="fr2">
      <div class="fg"><label class="fl">ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ</label><input class="fi" id="new-cat-name" placeholder="TikTok"></div>
      <div class="fg"><label class="fl">Ğ˜ĞºĞ¾Ğ½ĞºĞ°</label><input class="fi" id="new-cat-icon" placeholder="ğŸµ" maxlength="4"></div>
    </div>
    <button class="btn bp bsm" onclick="addCat()">+ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ</button>
  </div>
</div></div>

<!-- SETUP -->
<div id="sov" class="sov" style="display:none">
<div class="sbox">
  <div style="font-family:var(--font-display);font-size:24px;letter-spacing:4px;background:linear-gradient(135deg,var(--accent2),var(--blue));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:4px">OMNI-CONTROL</div>
  <div style="font-size:10px;color:var(--muted);letter-spacing:2px;margin-bottom:22px">ĞŸĞĞ”ĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ• Ğš API</div>
  <div class="fg"><label class="fl">IP ÑĞµÑ€Ğ²ĞµÑ€Ğ°</label><input class="fi" id="su" placeholder="http://123.45.67.89"></div>
  <div class="fg"><label class="fl">API Secret Key</label><input class="fi" id="sk" type="password" placeholder="Ğ¸Ğ· .env Ñ„Ğ°Ğ¹Ğ»Ğ°"></div>
  <button class="btn bp bfw" style="margin-bottom:10px" onclick="saveConfig()">ğŸ”Œ ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ</button>
  <button class="btn bg-btn bfw" onclick="g('sov').style.display='none'">âœ• Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ</button>
  <div id="se" style="color:var(--red);font-size:11px;margin-top:10px;text-align:center;display:none"></div>
</div></div>

<div class="toast-el" id="toastEl"></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let CATS = [
  {id:1,name:'TikTok',icon:'ğŸµ'},
  {id:2,name:'Instagram',icon:'ğŸ“¸'},
  {id:3,name:'Ğ¢Ğ¸Ñ€Ñ',icon:'ğŸ¯'},
  {id:4,name:'Ğ›Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¶Ğ¸Ğ·Ğ½ÑŒ',icon:'ğŸ’«'},
  {id:5,name:'Ğ‘Ğ¸Ğ·Ğ½ĞµÑ',icon:'ğŸ’¼'},
  {id:6,name:'ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ',icon:'ğŸ”¥'},
];
let POSTS = [];
let ADS = [];
let HERO = [];
let TEAM = [{id:103920773,name:'Goulash1986',role:'owner',date:'01.01.2026'}];
let INBOX = [];
let NOTIFS = [];
let _conCat = 'all', _adF = 'all', _inboxF = 'all';
let _aiTimer = null;
let _kbOffset = 0; // weeks
let _dragPost = null;
const THEMES = [
  {id:'cyber',name:'Cyberpunk',prev:'linear-gradient(135deg,#070710,#7c3aed)'},
  {id:'ios-dark',name:'iOS Dark',prev:'linear-gradient(135deg,#000,#1c1c1e,#0a84ff)'},
  {id:'ios-white',name:'iOS White',prev:'linear-gradient(135deg,#f2f2f7,#007aff)'},
  {id:'rose',name:'Rose Dark',prev:'linear-gradient(135deg,#0f0812,#ec4899)'},
  {id:'white-rose',name:'White Rose',prev:'linear-gradient(135deg,#fff5f8,#e91e8c)'},
  {id:'aurora',name:'Aurora',prev:'linear-gradient(135deg,#030810,#00c8ff,#00f0a0)'},
  {id:'lux',name:'Luxury Gold',prev:'linear-gradient(135deg,#0a0800,#d4a017)'},
  {id:'minimal',name:'Minimal',prev:'linear-gradient(135deg,#fafafa,#111)'},
];

const CFG = {
  get url(){return localStorage.getItem('omni_url')||'';},
  get key(){return localStorage.getItem('omni_key')||'';},
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QR / LOCK â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CORRECT_PIN = () => localStorage.getItem('omni_pin') || '2026';
let pinInput = '';

// Draw QR code (simple matrix generation)
function drawQR() {
  const canvas = document.getElementById('qrCanvas');
  const ctx = canvas.getContext('2d');
  const size = 180;
  const modules = 25;
  const cell = Math.floor(size / modules);
  ctx.fillStyle = '#fff';
  ctx.fillRect(0,0,size,size);
  // Generate pseudo-QR pattern based on URL
  const url = `https://t.me/omni_control_bot?start=auth_${Date.now().toString(36)}`;
  const seed = url.split('').reduce((a,c)=>a+c.charCodeAt(0),0);
  const rng = (i) => ((seed * 1103515245 + i * 214013 + 2531011) & 0x7fffffff) % 2;
  ctx.fillStyle = '#000';
  for(let r=0;r<modules;r++){
    for(let c=0;c<modules;c++){
      let filled = false;
      // Corner squares (finder patterns)
      if((r<7&&c<7)||(r<7&&c>=modules-7)||(r>=modules-7&&c<7)){
        if(r===0||r===6||(r>=modules-7&&r===modules-7)||r===modules-1){filled=c>=0;}
        else if(c===0||c===6||(c>=modules-7&&c===modules-7)||c===modules-1){filled=true;}
        else if(r>=2&&r<=4&&c>=2&&c<=4){filled=true;}
        else if(r>=modules-5&&r<=modules-3&&c>=2&&c<=4){filled=true;}
        else if(r>=2&&r<=4&&c>=modules-5&&c<=modules-3){filled=true;}
        else filled=false;
      } else {
        filled = rng(r*modules+c) === 0;
      }
      if(filled){ctx.fillRect(c*cell,r*cell,cell-1,cell-1);}
    }
  }
}

function pinPress(d) {
  if(d==='') { showSetup(); return; }
  if(pinInput.length>=4) return;
  pinInput += d;
  updatePinDots();
  if(pinInput.length===4) setTimeout(checkPin,200);
}

function pinDel() {
  pinInput = pinInput.slice(0,-1);
  updatePinDots();
}

function updatePinDots() {
  for(let i=0;i<4;i++){
    const dot = document.getElementById('pd'+i);
    dot.classList.toggle('filled', i < pinInput.length);
  }
}

function checkPin() {
  if(pinInput === CORRECT_PIN()) {
    unlockApp();
  } else {
    const err = document.getElementById('lockErr');
    err.textContent = 'âŒ ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ PIN';
    // Shake animation
    const dots = document.getElementById('pinDots');
    dots.style.animation = 'shake .4s';
    setTimeout(()=>{dots.style.animation='';pinInput='';updatePinDots();err.textContent='';},500);
  }
}

function unlockApp() {
  const lock = document.getElementById('lockScreen');
  lock.style.transition = 'opacity .4s, transform .4s';
  lock.style.opacity = '0';
  lock.style.transform = 'scale(1.05)';
  setTimeout(()=>{
    lock.style.display = 'none';
    document.getElementById('app').style.display = 'block';
    initApp();
  }, 400);
  addNotif('ğŸ”“','Ğ’Ñ…Ğ¾Ğ´ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½','Ğ£ÑĞ¿ĞµÑˆĞ½Ğ°Ñ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ² Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸','ÑĞµĞ¹Ñ‡Ğ°Ñ');
}

function doLogout() {
  if(!confirm('Ğ’Ñ‹Ğ¹Ñ‚Ğ¸ Ğ¸Ğ· Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸?')) return;
  document.getElementById('app').style.display = 'none';
  const lock = document.getElementById('lockScreen');
  lock.style.display = 'flex';
  lock.style.opacity = '1';
  lock.style.transform = 'none';
  pinInput = ''; updatePinDots();
  document.getElementById('lockErr').textContent = '';
  drawQR();
}

function changePin() {
  const np = document.getElementById('new-pin').value;
  if(!/^\d{4}$/.test(np)){alert('PIN Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ 4 Ñ†Ğ¸Ñ„Ñ€Ñ‹');return;}
  localStorage.setItem('omni_pin', np);
  toast('ğŸ”‘ PIN Ğ¸Ğ·Ğ¼ĞµĞ½Ñ‘Ğ½!');
  document.getElementById('new-pin').value = '';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• NOTIFICATIONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function addNotif(icon, text, detail, time) {
  NOTIFS.unshift({id:Date.now(),icon,text,detail,time,read:false});
  if(NOTIFS.length > 50) NOTIFS.pop();
  updateBell();
}

function updateBell() {
  const unread = NOTIFS.filter(n=>!n.read).length;
  const badge = document.getElementById('bellBadge');
  badge.textContent = unread;
  badge.style.display = unread > 0 ? 'flex' : 'none';
}

function toggleNotif() {
  const panel = document.getElementById('notifPanel');
  panel.classList.toggle('open');
  if(panel.classList.contains('open')) renderNotifs();
  // Close on outside click
  setTimeout(()=>{
    document.addEventListener('click', function closer(e){
      if(!panel.contains(e.target) && e.target.id !== 'bellBtn'){
        panel.classList.remove('open');
        document.removeEventListener('click', closer);
      }
    });
  },10);
}

function renderNotifs() {
  const list = document.getElementById('notifList');
  if(!NOTIFS.length){list.innerHTML='<div class="notif-empty">ğŸ”” ĞĞµÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹</div>';return;}
  list.innerHTML = NOTIFS.map(n=>`
    <div class="notif-item ${n.read?'':'unread'}" onclick="readNotif(${n.id})">
      <div class="notif-icon">${n.icon}</div>
      <div class="notif-body">
        <div class="notif-text"><strong>${n.text}</strong>${n.detail?'<br><span style="opacity:.7">'+n.detail+'</span>':''}</div>
        <div class="notif-time">${n.time}</div>
      </div>
      ${!n.read?'<div class="notif-dot"></div>':''}
    </div>`).join('');
  NOTIFS.forEach(n=>n.read=true);
  updateBell();
}

function readNotif(id){NOTIFS.find(n=>n.id===id)&&(NOTIFS.find(n=>n.id===id).read=true);renderNotifs();}
function clearNotifs(){NOTIFS=[];renderNotifs();updateBell();}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INIT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initApp() {
  const th = localStorage.getItem('omni_theme') || 'cyber';
  document.documentElement.setAttribute('data-theme', th);
  buildThemeGrid();
  loadDash();
  loadContent();
  loadKanban();
  loadAds();
  loadHero();
  loadTeam();
  loadInbox();
  loadFinance();
  populateCats();
  setupDragDrop();

  // Demo notifications
  setTimeout(()=>addNotif('ğŸ“¢','Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ° "Beauty Store" Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°','ĞĞ²Ñ‚Ğ¾Ğ¿Ğ¾ÑÑ‚ Ğ² 14:00','Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ñ‚Ğ¾'),1000);
  setTimeout(()=>addNotif('ğŸ“Š','ĞŸĞ¾ÑÑ‚ ÑĞ¾Ğ±Ñ€Ğ°Ğ» Ğ² 2Ã— Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ»Ğ°Ğ¹ĞºĞ¾Ğ²','Ğ Ğ¸Ğ»Ñ Ğ¾Ñ‚ 25.02 â€” Ñ€Ğ°ÑÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸ Ñ€ĞµĞ¿Ğ¾ÑÑ‚!','2 Ğ¼Ğ¸Ğ½ Ğ½Ğ°Ğ·Ğ°Ğ´'),2500);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• NAVIGATION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function gp(id, btn) {
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nb').forEach(b=>b.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  btn.classList.add('active');
  if(id==='kanban') loadKanban();
  if(id==='finance') loadFinance();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DASHBOARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadDash() {
  cnt('dsp', POSTS.length);
  cnt('dsa', ADS.filter(a=>a.status==='active').length);
  cnt('dsinc', ADS.filter(a=>a.status!=='pending').reduce((s,a)=>s+a.price,0));
  cnt('dsr', INBOX.filter(m=>m.status==='unread').length);
  setTimeout(()=>{
    pw('bI',100); pw('bC',4.2); pw('bT',42);
    g('vI').textContent='12.4k'; g('vC').textContent='520'; g('vT').textContent='4.2%';
  },300);
  const ctx = g('cDash')?.getContext('2d');
  if(ctx){
    if(window._cD) window._cD.destroy();
    const isDark = !['ios-white','white-rose','minimal'].includes(document.documentElement.getAttribute('data-theme'));
    window._cD = new Chart(ctx,{
      type:'bar',
      data:{
        labels:['ĞŸĞ½','Ğ’Ñ‚','Ğ¡Ñ€','Ğ§Ñ‚','ĞŸÑ‚','Ğ¡Ğ±','Ğ’Ñ'],
        datasets:[{
          data:[POSTS.length,0,0,0,0,0,0].map((v,i)=>i===0?POSTS.length:Math.floor(Math.random()*5)),
          backgroundColor:'rgba(124,58,237,.5)',
          borderColor:'rgba(168,85,247,.8)',
          borderWidth:1,borderRadius:6
        }]
      },
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},
        scales:{
          x:{grid:{color:'rgba(128,128,128,.08)'},ticks:{color:isDark?'#6060a0':'#888',font:{size:10}}},
          y:{grid:{color:'rgba(128,128,128,.08)'},ticks:{color:isDark?'#6060a0':'#888',font:{size:10},stepSize:1}}
        }
      }
    });
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONTENT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadContent() {
  const bar = g('conCatBar');
  bar.innerHTML = '<div class="chip active" onclick="fConCat(\'all\',this)">Ğ’ÑĞµ</div>' +
    CATS.map(c=>`<div class="chip" onclick="fConCat('${c.id}',this)">${c.icon} ${c.name}</div>`).join('');
  renderCon();
}

function fConCat(v, btn) {
  _conCat = v;
  g('conCatBar').querySelectorAll('.chip').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  renderCon();
}

function renderCon() {
  let posts = _conCat==='all' ? POSTS : POSTS.filter(p=>String(p.cat_id)===String(_conCat));
  const phoneCard = `<div class="phone-add" onclick="openPost()">
    <div class="ph-screen">
      <div class="ph-notch"></div>
      <div class="ph-screen-inner">
        <div class="ph-plus">ï¼‹</div>
        <div class="ph-label-sm">NEW</div>
      </div>
    </div>
    <div class="ph-add-label">ĞĞ¾Ğ²Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ°</div>
  </div>`;
  g('contentCards').innerHTML = phoneCard + posts.map(p=>{
    const cat = CATS.find(c=>c.id===p.cat_id)||{icon:'ğŸ“‹',name:''};
    const btnHtml = (p.buttons||[]).map(b=>`
      <div class="cbtnchip">
        ğŸ”— ${b.text}
        <span class="heat ${(b.clicks||0)===0?'dead':''}">${b.clicks||0}</span>
      </div>`).join('');
    return `<div class="iphcard">
      <div class="di"></div>
      <div class="cposter">
        ${p.poster_url?`<img src="${p.poster_url}">`:`<div class="cpph"><div class="cpph-icon">${cat.icon}</div><div class="cpph-label">${cat.name}</div></div>`}
      </div>
      <div class="cbody">
        <div class="ccat">${cat.icon} ${cat.name}</div>
        <div class="ctitle">${p.title||'Ğ‘ĞµĞ· Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ'}</div>
        <div class="ctext">${p.text}</div>
        ${btnHtml?`<div class="cbtns">${btnHtml}</div>`:''}
      </div>
      <div class="cact">
        <button class="cab csen" onclick="sendPost(${p.id})">ğŸ“¤ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ</button>
        <button class="cab cedt" onclick="editPost(${p.id})">âœï¸</button>
        <button class="cab cdel" onclick="delPost(${p.id})">ğŸ—‘</button>
      </div>
    </div>`;
  }).join('');
}

function openPost() { g('post-eid').value=''; resetPostForm(); g('ov-post').style.display='flex'; }

function resetPostForm() {
  g('post-text').value=''; g('post-purl').value='';
  g('post-fdrop').className='fdrop';
  g('post-fdrop').innerHTML='<div class="fdrop-icon">ğŸ–¼</div><div class="fdrop-txt">ĞĞ°Ğ¶Ğ¼Ğ¸ Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ (JPG/PNG/WEBP)</div>';
  g('post-prev').style.display='none';
  g('post-btns').innerHTML=`<div class="ibr"><input class="fi" placeholder="Ğ¢ĞµĞºÑÑ‚ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸" style="flex:1"><input class="fi" placeholder="URL" style="flex:1.5"><button class="ibrm" onclick="this.closest('.ibr').remove()">âœ•</button></div>`;
  g('ais-post').classList.remove('show');
}

function editPost(id) {
  const p = POSTS.find(x=>x.id===id); if(!p) return;
  resetPostForm();
  g('post-eid').value = id;
  g('post-cat').value = p.cat_id;
  g('post-text').value = p.text;
  if(p.poster_url){ g('post-purl').value=p.poster_url; g('post-prev').style.display='block'; g('post-prev-img').src=p.poster_url; }
  const ed = g('post-btns');
  ed.innerHTML = (p.buttons||[]).map(b=>`<div class="ibr"><input class="fi" placeholder="Ğ¢ĞµĞºÑÑ‚" value="${b.text}" style="flex:1"><input class="fi" placeholder="URL" value="${b.url}" style="flex:1.5"><button class="ibrm" onclick="this.closest('.ibr').remove()">âœ•</button></div>`).join('');
  g('ov-post').style.display='flex';
}

function savePost() {
  const eid = parseInt(g('post-eid').value);
  const catId = parseInt(g('post-cat').value);
  const cat = CATS.find(c=>c.id===catId);
  const txt = g('post-text').value.trim();
  if(!txt){toast('âŒ Ğ’Ğ²ĞµĞ´Ğ¸ Ñ‚ĞµĞºÑÑ‚ Ğ¿Ğ¾ÑÑ‚Ğ°');return;}
  const btns = [...g('post-btns').querySelectorAll('.ibr')].map(r=>{
    const inp = r.querySelectorAll('input');
    return {text:inp[0].value.trim(),url:inp[1].value.trim(),clicks:0};
  }).filter(b=>b.text);
  const d = {
    cat_id:catId, poster_url:g('post-purl').value,
    title: txt.replace(/[\n\r]/g,' ').replace(/[^\wĞ-ÑĞÑ‘Ğ‡Ñ—Ğ†Ñ–Ğ„Ñ”\s!?ğŸ”¥âœ¨ğŸ’¡ğŸ’ğŸµğŸ“¸ğŸ¯ğŸ’«ğŸ’¼]/g,'').trim().substring(0,50)||'Ğ‘ĞµĞ· Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ',
    text:txt, buttons:btns, created:new Date().toLocaleDateString('ru'),
    scheduled_date: null
  };
  if(eid){ const i=POSTS.findIndex(p=>p.id===eid); if(i>=0)POSTS[i]={...POSTS[i],...d}; }
  else POSTS.unshift({id:Date.now(),...d});
  cls('ov-post'); renderCon(); loadDash(); loadKanban();
  toast('âœ… ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°!');
  addNotif('ğŸ“¦',`ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° "${d.title}"`,eid?'ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ°':'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ° Ğ½Ğ¾Ğ²Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ°','ÑĞµĞ¹Ñ‡Ğ°Ñ');
}

function sendPost(id) {
  const p = POSTS.find(x=>x.id===id);
  if(p && confirm(`ĞĞ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ "${p.title||'Ğ¿Ğ¾ÑÑ‚'}" Ğ² ĞºĞ°Ğ½Ğ°Ğ»?`)){
    toast('ğŸ“¤ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ² ĞºĞ°Ğ½Ğ°Ğ»...');
    addNotif('ğŸ“¤',`ĞŸĞ¾ÑÑ‚ "${p.title||'Ğ¿Ğ¾ÑÑ‚'}"`,`ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½ Ğ² ĞºĞ°Ğ½Ğ°Ğ» Telegram`,'ÑĞµĞ¹Ñ‡Ğ°Ñ');
  }
}

function delPost(id) {
  if(!confirm('Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ?'))return;
  const p = POSTS.find(x=>x.id===id);
  POSTS = POSTS.filter(p=>p.id!==id);
  renderCon(); loadDash(); loadKanban();
  toast('ğŸ—‘ Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¾');
  if(p) addNotif('ğŸ—‘',`ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ°`,p.title||'','ÑĞµĞ¹Ñ‡Ğ°Ñ');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• KANBAN CALENDAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadKanban() {
  const now = new Date();
  const base = new Date(now);
  base.setDate(base.getDate() - base.getDay() + 1 + _kbOffset*7);
  const grid = g('kbGrid');
  const title = g('kbTitle');
  const months=['Ğ¯Ğ½Ğ²Ğ°Ñ€ÑŒ','Ğ¤ĞµĞ²Ñ€Ğ°Ğ»ÑŒ','ĞœĞ°Ñ€Ñ‚','ĞĞ¿Ñ€ĞµĞ»ÑŒ','ĞœĞ°Ğ¹','Ğ˜ÑĞ½ÑŒ','Ğ˜ÑĞ»ÑŒ','ĞĞ²Ğ³ÑƒÑÑ‚','Ğ¡ĞµĞ½Ñ‚ÑĞ±Ñ€ÑŒ','ĞĞºÑ‚ÑĞ±Ñ€ÑŒ','ĞĞ¾ÑĞ±Ñ€ÑŒ','Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ'];
  // Header row
  const days = ['ĞŸĞ½','Ğ’Ñ‚','Ğ¡Ñ€','Ğ§Ñ‚','ĞŸÑ‚','Ğ¡Ğ±','Ğ’Ñ'];
  let html = days.map(d=>`<div class="kanban-day-hdr">${d}</div>`).join('');
  const weekDates = [];
  for(let i=0;i<7;i++){
    const d=new Date(base); d.setDate(base.getDate()+i); weekDates.push(d);
  }
  title.textContent = `${weekDates[0].getDate()} â€” ${weekDates[6].getDate()} ${months[weekDates[6].getMonth()]}`;
  weekDates.forEach((d,i)=>{
    const isToday = d.toDateString()===now.toDateString();
    const dateStr = d.toISOString().slice(0,10);
    const cellPosts = POSTS.filter(p=>p.scheduled_date===dateStr);
    const cellAds = ADS.filter(a=>{
      if(!a.pub_at) return false;
      try{return new Date(a.pub_at).toISOString().slice(0,10)===dateStr;}catch{return false;}
    });
    const items = [
      ...cellPosts.map(p=>`<div class="kanban-item" draggable="true" data-id="${p.id}" data-type="post" ondragstart="kbDragStart(event)">${p.title||p.text.substring(0,20)}</div>`),
      ...cellAds.map(a=>`<div class="kanban-item ad" draggable="true" data-id="${a.id}" data-type="ad" ondragstart="kbDragStart(event)">ğŸ’¼ ${a.client}</div>`),
    ].join('');
    html += `<div class="kanban-cell ${isToday?'today':''}" data-date="${dateStr}"
      ondragover="event.preventDefault();this.classList.add('drag-over')"
      ondragleave="this.classList.remove('drag-over')"
      ondrop="kbDrop(event,this)">
      <div class="kanban-date">${d.getDate()}</div>
      ${items}
    </div>`;
  });
  grid.innerHTML = html;
}

function kbDragStart(e){
  _dragPost = {id:parseInt(e.target.dataset.id),type:e.target.dataset.type};
  e.dataTransfer.effectAllowed='move';
}

function kbDrop(e, cell) {
  e.preventDefault();
  cell.classList.remove('drag-over');
  const date = cell.dataset.date;
  if(!_dragPost || !date) return;
  if(_dragPost.type==='post'){
    const p = POSTS.find(x=>x.id===_dragPost.id);
    if(p){ p.scheduled_date=date; toast(`ğŸ“… ĞŸĞ¾ÑÑ‚ Ğ¿ĞµÑ€ĞµĞ½ĞµÑÑ‘Ğ½ Ğ½Ğ° ${date}`); addNotif('ğŸ“…',`ĞŸĞ¾ÑÑ‚ Ğ¿ĞµÑ€ĞµĞ½ĞµÑÑ‘Ğ½`,`"${p.title||''}" â†’ ${date}`,'ÑĞµĞ¹Ñ‡Ğ°Ñ'); }
  }
  loadKanban();
}

function kbPrev(){_kbOffset--;loadKanban();}
function kbNext(){_kbOffset++;loadKanban();}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ADS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadAds(){
  g('adAct').textContent=ADS.filter(a=>a.status==='active').length;
  g('adPen').textContent=ADS.filter(a=>a.status==='pending').length;
  g('adDon').textContent=ADS.filter(a=>a.status==='done').length;
  g('adInc').textContent=ADS.filter(a=>a.status!=='pending').reduce((s,a)=>s+a.price,0);
  renderAds();
}

function fAds(v,btn){
  _adF=v;
  g('adFilterBar').querySelectorAll('.chip').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');renderAds();
}

function renderAds(){
  const ads = _adF==='all' ? ADS : ADS.filter(a=>a.status===_adF);
  const sc={active:'sact',pending:'spen',done:'spub'};
  const st={active:'ğŸ“¢ Ğ’ ĞºĞ°Ğ½Ğ°Ğ»Ğµ',pending:'â³ Ğ’ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸',done:'âœ… Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°'};
  const phoneCard=`<div class="phone-add" onclick="openAd()">
    <div class="ph-screen"><div class="ph-notch"></div><div class="ph-screen-inner"><div class="ph-plus">ï¼‹</div><div class="ph-label-sm">AD</div></div></div>
    <div class="ph-add-label">ĞĞ¾Ğ²Ğ°Ñ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ</div>
  </div>`;
  g('adsCards').innerHTML = phoneCard + ads.map(a=>`
    <div class="iphcard">
      <div class="di"></div>
      <span style="position:absolute;top:48px;right:10px;z-index:5;padding:3px 8px;border-radius:20px;font-size:9px;font-weight:700;backdrop-filter:blur(10px);background:rgba(16,185,129,.15);color:var(--green);border:1px solid rgba(16,185,129,.25)">${st[a.status]||a.status}</span>
      <div class="cposter">
        ${a.poster_url?`<img src="${a.poster_url}">`:`<div class="cpph"><div class="cpph-icon">ğŸ’¼</div><div class="cpph-label">${a.client}</div></div>`}
      </div>
      <div class="cbody">
        <div class="ccat">ğŸ’¼ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ°</div>
        <div class="ctitle">${a.client}</div>
        <div class="ctext">${a.text}</div>
        <div class="admeta">
          <span class="adprice">${a.price} ${a.currency}</span>
          <span class="adtag">ğŸ“… ${a.pub_at||'â€”'}</span>
          ${a.del_after>0?`<span class="adtag">â± ${a.del_after}Ñ‡</span>`:''}
        </div>
      </div>
      <div class="cact">
        ${a.status==='pending'?`<button class="cab csen" onclick="activateAd(${a.id})">â–¶ ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button>`:'<div style="flex:1"></div>'}
        <button class="cab cedt" onclick="editAd(${a.id})">âœï¸</button>
        <button class="cab cdel" onclick="delAd(${a.id})">ğŸ—‘</button>
      </div>
    </div>`).join('');
}

function openAd(){g('ad-eid').value='';resetAdForm();g('ov-ad').style.display='flex';}

function resetAdForm(){
  ['ad-text','ad-client','ad-contact','ad-price'].forEach(id=>g(id)&&(g(id).value=''));
  g('ad-purl').value=''; g('ad-prev').style.display='none';
  g('ad-fdrop').className='fdrop';
  g('ad-fdrop').innerHTML='<div class="fdrop-icon">ğŸ–¼</div><div class="fdrop-txt">ĞĞ°Ğ¶Ğ¼Ğ¸ Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ</div>';
  g('ais-ad').classList.remove('show');
}

function editAd(id){
  const a=ADS.find(x=>x.id===id);if(!a)return;
  resetAdForm();
  g('ad-eid').value=id; g('ad-text').value=a.text; g('ad-client').value=a.client;
  g('ad-contact').value=a.contact||''; g('ad-price').value=a.price; g('ad-cur').value=a.currency;
  g('ad-del').value=a.del_after||0;
  if(a.poster_url){g('ad-purl').value=a.poster_url;g('ad-prev').style.display='block';g('ad-prev-img').src=a.poster_url;}
  g('ov-ad').style.display='flex';
}

function activateAd(id){
  const a=ADS.find(x=>x.id===id);
  if(a){a.status='active';loadAds();toast('ğŸ“¢ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°!');addNotif('ğŸ“¢',`Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ° "${a.client}"`,`ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ² ĞºĞ°Ğ½Ğ°Ğ»Ğµ`,'ÑĞµĞ¹Ñ‡Ğ°Ñ');}
}

function delAd(id){
  if(!confirm('Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ?'))return;
  const a=ADS.find(x=>x.id===id);
  ADS=ADS.filter(a=>a.id!==id);loadAds();loadDash();
  toast('ğŸ—‘ ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ°');
  if(a)addNotif('ğŸ—‘',`Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ° ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ°`,a.client,'ÑĞµĞ¹Ñ‡Ğ°Ñ');
}

function saveAd(){
  const eid=parseInt(g('ad-eid').value);
  const d={
    poster_url:g('ad-purl').value, text:g('ad-text').value.trim(),
    client:g('ad-client').value.trim(), contact:g('ad-contact').value.trim(),
    price:parseFloat(g('ad-price').value)||0, currency:g('ad-cur').value,
    del_after:parseInt(g('ad-del').value)||0,
    pub_at:g('ad-pub').value||new Date().toLocaleDateString('ru'),
    status:'pending'
  };
  if(!d.text||!d.client){toast('âŒ Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸ Ñ‚ĞµĞºÑÑ‚ Ğ¸ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ¾Ğ´Ğ°Ñ‚ĞµĞ»Ñ');return;}
  if(eid){const i=ADS.findIndex(a=>a.id===eid);if(i>=0)ADS[i]={...ADS[i],...d};}
  else ADS.unshift({id:Date.now(),...d});
  cls('ov-ad');loadAds();loadDash();
  toast('âœ… ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°!');
  addNotif('ğŸ’¼',`ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ "${d.client}"`,eid?'ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ°':'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ','ÑĞµĞ¹Ñ‡Ğ°Ñ');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HERO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadHero(){
  g('hcount').textContent=HERO.length;
  const phoneCard=`<div class="phone-add" onclick="openHero()">
    <div class="ph-screen"><div class="ph-notch"></div><div class="ph-screen-inner"><div class="ph-plus">ï¼‹</div><div class="ph-label-sm">HERO</div></div></div>
    <div class="ph-add-label">ĞĞ¾Ğ²Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ°</div>
  </div>`;
  g('heroCards').innerHTML=phoneCard+HERO.map(h=>`
    <div class="iphcard">
      <div class="di"></div>
      <div class="cposter">${h.poster_url?`<img src="${h.poster_url}">`:`<div class="cpph"><div class="cpph-icon">${h.emoji||'ğŸŒŸ'}</div></div>`}</div>
      <div class="cbody">
        <div class="ccat">ğŸŒŸ ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶</div>
        <div class="ctitle">${h.title||'â€”'}</div>
        <div class="ctext">${h.text}</div>
      </div>
      <div class="cact">
        <button class="cab cedt" onclick="previewHero(${h.id})" style="flex:2">ğŸ‘ ĞŸÑ€ĞµĞ²ÑŒÑ</button>
        <button class="cab cedt" onclick="editHero(${h.id})">âœï¸</button>
        <button class="cab cdel" onclick="delHero(${h.id})">ğŸ—‘</button>
      </div>
    </div>`).join('');
}

function openHero(){if(HERO.length>=6){toast('ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 6 ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº!');return;}g('hero-eid').value='';resetHeroForm();g('ov-hero').style.display='flex';}
function resetHeroForm(){
  ['hero-title','hero-text','hero-emoji'].forEach(id=>g(id)&&(g(id).value=''));
  g('hero-purl').value='';g('hero-prev').style.display='none';
  g('hero-fdrop').className='fdrop';
  g('hero-fdrop').innerHTML='<div class="fdrop-icon">ğŸŒŸ</div><div class="fdrop-txt">ĞĞ°Ğ¶Ğ¼Ğ¸ Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ</div>';
  g('ais-hero').classList.remove('show');
}
function editHero(id){const h=HERO.find(x=>x.id===id);if(!h)return;resetHeroForm();g('hero-eid').value=id;g('hero-title').value=h.title||'';g('hero-text').value=h.text;g('hero-emoji').value=h.emoji||'';if(h.poster_url){g('hero-purl').value=h.poster_url;g('hero-prev').style.display='block';g('hero-prev-img').src=h.poster_url;}g('ov-hero').style.display='flex';}
function previewHero(id){const h=HERO.find(x=>x.id===id);if(h)alert(`ĞŸÑ€ĞµĞ²ÑŒÑ:\n\n${h.emoji||'ğŸŒŸ'} ${h.title||''}\n\n${h.text}`);}
function delHero(id){if(!confirm('Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°?'))return;HERO=HERO.filter(h=>h.id!==id);loadHero();toast('ğŸ—‘ Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¾');}
function saveHero(){
  const eid=parseInt(g('hero-eid').value);
  const d={title:g('hero-title').value.trim(),text:g('hero-text').value.trim(),emoji:g('hero-emoji').value||'ğŸŒŸ',poster_url:g('hero-purl').value};
  if(!d.title&&!d.text){toast('âŒ Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº Ğ¸Ğ»Ğ¸ Ñ‚ĞµĞºÑÑ‚');return;}
  if(eid){const i=HERO.findIndex(h=>h.id===eid);if(i>=0)HERO[i]={...HERO[i],...d};}
  else{if(HERO.length>=6){toast('ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 6 ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº!');return;}HERO.push({id:Date.now(),...d});}
  cls('ov-hero');loadHero();toast('âœ… ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°!');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TEAM â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadTeam(){
  g('reqBlock').style.display='none';
  const rc={owner:'rlo',admin:'rla',editor:'rle'};
  const rt={owner:'ğŸ‘‘ Owner',admin:'ğŸ›¡ Admin',editor:'âœï¸ Editor'};
  g('teamTbl').innerHTML=TEAM.map(u=>`
    <tr>
      <td><div style="display:flex;align-items:center;gap:10px"><div class="av">${(u.name||'?')[0].toUpperCase()}</div><div style="font-size:13px">${u.name}</div></div></td>
      <td><span class="rl ${rc[u.role]||''}">${rt[u.role]||u.role}</span></td>
      <td><code style="font-size:11px;color:var(--muted)">${u.id}</code></td>
      <td style="font-size:11px;color:var(--muted)">${u.date}</td>
      <td><div style="display:flex;gap:5px">
        ${u.role!=='owner'?`<button class="btn bg-btn bsm" onclick="changeRole(${u.id})" style="font-size:10px">ğŸ”„ Ğ Ğ¾Ğ»ÑŒ</button><button class="btn bd-btn bsm" onclick="banTeam(${u.id},'${u.name}')" style="font-size:10px">ğŸš«</button>`:'<span style="color:var(--muted);font-size:11px">â€”</span>'}
      </div></td>
    </tr>`).join('');
}

function changeRole(id){const u=TEAM.find(x=>x.id===id);if(!u)return;const nr=u.role==='admin'?'editor':'admin';if(confirm(`Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ€Ğ¾Ğ»ÑŒ ${u.name} Ğ½Ğ° ${nr}?`)){u.role=nr;loadTeam();toast('âœ… Ğ Ğ¾Ğ»ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ°');addNotif('ğŸ”„',`Ğ Ğ¾Ğ»ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ°`,`${u.name} â†’ ${nr}`,'ÑĞµĞ¹Ñ‡Ğ°Ñ');}}
function banTeam(id,name){if(!confirm(`Ğ˜ÑĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ${name} Ğ¸Ğ· ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹?`))return;const i=TEAM.findIndex(x=>x.id===id);if(i>=0)TEAM.splice(i,1);loadTeam();toast('ğŸš« Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ğ¸ÑĞºĞ»ÑÑ‡Ñ‘Ğ½');addNotif('ğŸš«',`${name} Ğ¸ÑĞºĞ»ÑÑ‡Ñ‘Ğ½`,`Ğ£Ğ´Ğ°Ğ»Ñ‘Ğ½ Ğ¸Ğ· ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹`,'ÑĞµĞ¹Ñ‡Ğ°Ñ');}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INBOX â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadInbox(){
  const uc=INBOX.filter(m=>m.status==='unread').length;
  g('inbBdg').textContent=uc;
  renderInbox();
}

function fInbox(v,btn){
  _inboxF=v;
  document.querySelectorAll('#inboxFilterBar .chip').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');renderInbox();
}

function renderInbox(){
  let msgs=INBOX;
  if(_inboxF==='unread')msgs=INBOX.filter(m=>m.status==='unread');
  else if(_inboxF==='warn')msgs=INBOX.filter(m=>m.warn);
  else if(_inboxF==='starred')msgs=INBOX.filter(m=>m.starred);
  else if(_inboxF==='archived')msgs=INBOX.filter(m=>m.status==='archived');
  else msgs=INBOX.filter(m=>m.status!=='deleted');
  const sl={ig:'sig',tt:'stt',tg:'stg'};
  const sn={ig:'ğŸ“¸ Instagram',tt:'ğŸµ TikTok',tg:'ğŸ“± Telegram'};
  g('inboxTbl').innerHTML=msgs.length?msgs.map(m=>`
    <tr class="${m.status==='unread'?'urow':''}">
      <td style="font-size:12px;font-weight:${m.status==='unread'?700:400}">${m.from}${m.warn?' âš ï¸':''}</td>
      <td style="font-size:11px;color:var(--text2)">${m.msg.substring(0,50)}${m.msg.length>50?'...':''}</td>
      <td><span class="msrc ${sl[m.src]||''} ${m.warn?'swrn':''}">${sn[m.src]||m.src}</span></td>
      <td style="font-size:10px;color:var(--muted)">${m.time}</td>
      <td><div style="display:flex;gap:4px">
        <button class="btn bg-btn bsm" onclick="replyMsg(${m.id},'${m.from}')" style="font-size:10px">â†©ï¸</button>
        <button class="btn bg-btn bsm" onclick="starMsg(${m.id})" style="font-size:10px">${m.starred?'â­':'â˜†'}</button>
        <button class="btn bg-btn bsm" onclick="archiveMsg(${m.id})" style="font-size:10px">ğŸ—ƒ</button>
      </div></td>
    </tr>`).join('') : `<tr><td colspan="5" style="text-align:center;color:var(--muted);padding:30px;font-size:12px">ğŸ“­ ĞĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹</td></tr>`;
}

function replyMsg(id,from){const t=prompt(`ĞÑ‚Ğ²ĞµÑ‚Ğ¸Ñ‚ÑŒ ${from}:`);if(t){toast(`âœ… ĞÑ‚Ğ²ĞµÑ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½ ${from}`);addNotif('â†©ï¸',`ĞÑ‚Ğ²ĞµÑ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½`,from,'ÑĞµĞ¹Ñ‡Ğ°Ñ');}}
function starMsg(id){const m=INBOX.find(x=>x.id===id);if(m){m.starred=!m.starred;renderInbox();}}
function archiveMsg(id){const m=INBOX.find(x=>x.id===id);if(m){m.status='archived';loadInbox();}}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FINANCE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadFinance(){
  const inc=ADS.filter(a=>a.status!=='pending').reduce((s,a)=>s+a.price,0);
  cnt('fInc',inc);cnt('fExp',0);cnt('fPro',inc);cnt('fCam',ADS.length);
  g('fTot').textContent=inc+' UAH';
  g('fAvg').textContent=(ADS.length?Math.round(inc/ADS.length):0)+' UAH';
  g('fAct2').textContent=ADS.filter(a=>a.status==='active').length;
  g('fDone').textContent=ADS.filter(a=>a.status==='done').length;
  const clients=[...new Set(ADS.map(a=>a.client))];
  g('finTable').innerHTML=clients.length?`
    <table class="tbl"><thead><tr><th>ĞšĞ»Ğ¸ĞµĞ½Ñ‚</th><th>Ğ¡ÑƒĞ¼Ğ¼Ğ°</th><th>ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹</th></tr></thead><tbody>
    ${clients.map(cl=>{const ca=ADS.filter(a=>a.client===cl);return`<tr><td style="font-size:12px">${cl}</td><td style="color:var(--green);font-size:12px">${ca.reduce((s,a)=>s+a.price,0)} UAH</td><td style="font-size:12px">${ca.length}</td></tr>`;}).join('')}
    </tbody></table>` : '<div style="color:var(--muted);font-size:12px;padding:10px 0">ĞĞµÑ‚ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ½Ñ‹Ñ… ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹</div>';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PANIC â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function doPanic(){
  if(!confirm('ğŸš¨ PANIC MODE\n\nĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸?\nĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ±ÑƒĞ´ĞµÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ°!'))return;
  const n=POSTS.filter(p=>p.scheduled_date).length;
  POSTS.forEach(p=>{p.scheduled_date=null;});
  ADS.forEach(a=>{if(a.status==='pending')a.status='cancelled';});
  renderCon();loadAds();loadKanban();
  toast(`ğŸš¨ Panic Mode! Ğ¡Ğ±Ñ€Ğ¾ÑˆĞµĞ½Ğ¾: ${n} Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ²`);
  addNotif('ğŸš¨','PANIC MODE Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½',`ĞÑ‚Ğ¼ĞµĞ½ĞµĞ½Ğ¾ Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ²: ${n}`,'ÑĞµĞ¹Ñ‡Ğ°Ñ');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CATEGORIES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openCats(){renderCatsList();g('ov-cats').style.display='flex';}
function renderCatsList(){
  g('cats-list').innerHTML=CATS.map(c=>`
    <div style="display:flex;align-items:center;gap:12px;padding:10px 0;border-bottom:1px solid var(--border)">
      <span style="font-size:22px">${c.icon}</span>
      <div style="flex:1;font-size:14px;font-weight:500">${c.name}</div>
      <button onclick="deleteCat(${c.id})" style="background:none;border:none;color:var(--red);cursor:pointer;font-size:18px;padding:4px">ğŸ—‘</button>
    </div>`).join('');
}
function addCat(){
  const name=g('new-cat-name').value.trim(),icon=g('new-cat-icon').value.trim()||'ğŸ“';
  if(!name){toast('âŒ Ğ’Ğ²ĞµĞ´Ğ¸ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ');return;}
  CATS.push({id:Date.now(),name,icon});
  g('new-cat-name').value='';g('new-cat-icon').value='';
  renderCatsList();loadContent();populateCats();
  toast(`âœ… ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ "${name}" Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ°`);
}
function deleteCat(id){
  if(POSTS.some(p=>p.cat_id===id)){toast('âŒ Ğ’ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ ĞµÑÑ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸!');return;}
  if(!confirm('Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ?'))return;
  const i=CATS.findIndex(x=>x.id===id);if(i>=0)CATS.splice(i,1);
  renderCatsList();loadContent();populateCats();toast('ğŸ—‘ ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ°');
}
function populateCats(){
  const sel=g('post-cat');
  if(sel)sel.innerHTML='<option value="">â€” Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ</option>'+CATS.map(c=>`<option value="${c.id}">${c.icon} ${c.name}</option>`).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• AI SUGGEST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function aiSug(el, sugId, txtId){
  clearTimeout(_aiTimer);
  if(el.value.length<20){g(sugId).classList.remove('show');return;}
  _aiTimer=setTimeout(()=>{
    const demos=[
      `ğŸ”¥ ${el.value.split('\n')[0].substring(0,40)}\n\nĞ­Ñ‚Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ Ğ²ÑÑ‘ Ñ‡Ñ‚Ğ¾ Ñ‚Ñ‹ Ğ·Ğ½Ğ°Ğ»...\n\nğŸ’¡ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑÑ‚ÑŒ\nğŸ‘‡ Ğ¡Ñ‚Ğ°Ğ²ÑŒ ğŸ”¥ ĞµÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ĞµĞ·Ğ½Ğ¾`,
      `âœ¨ Ğ¡Ğ»ÑƒÑˆĞ°Ğ¹, Ñ…Ğ¾Ñ‡Ñƒ Ğ¿Ğ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ!\n\n${el.value.split('\n')[0].substring(0,50)}\n\nĞ”Ğ°Ğ¹ Ğ·Ğ½Ğ°Ñ‚ÑŒ Ğ² ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ… ğŸ’¬`
    ];
    g(txtId).textContent=demos[Date.now()%2];
    g(sugId).classList.add('show');
  },900);
}
function useAi(inpId,sugId,txtId){g(inpId).value=g(txtId).textContent;g(sugId).classList.remove('show');}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FILE UPLOAD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function handleFile(input, dropId, hiddenId, prevId){
  const file=input.files[0]; if(!file)return;
  const drop=g(dropId);
  drop.className='fdrop has-file';
  drop.innerHTML=`<div style="font-size:24px;margin-bottom:6px">âœ…</div><div style="font-size:12px;color:var(--green)">${file.name}</div><div style="font-size:11px;color:var(--muted);margin-top:3px">${(file.size/1024/1024).toFixed(1)} MB</div>`;
  const reader=new FileReader();
  reader.onload=e=>{
    g(hiddenId).value=e.target.result;
    const prev=g(prevId);
    if(prev){prev.style.display='block';const img=prev.querySelector('img');if(img)img.src=e.target.result;}
  };
  reader.readAsDataURL(file);
}
function clearFile(fileId,dropId,hiddenId,prevId){
  const inp=g(fileId);if(inp)inp.value='';
  if(hiddenId)g(hiddenId).value='';
  const drop=g(dropId);
  if(drop){drop.className='fdrop';drop.innerHTML='<div class="fdrop-icon">ğŸ–¼</div><div class="fdrop-txt">ĞĞ°Ğ¶Ğ¼Ğ¸ Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ</div>';}
  const prev=g(prevId);if(prev)prev.style.display='none';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INLINE BUTTONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function addBtn(editorId){
  const ed=g(editorId);const row=document.createElement('div');row.className='ibr';
  row.innerHTML='<input class="fi" placeholder="Ğ¢ĞµĞºÑÑ‚ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸" style="flex:1"><input class="fi" placeholder="URL" style="flex:1.5"><button class="ibrm" onclick="this.closest(\'.ibr\').remove()">âœ•</button>';
  ed.appendChild(row);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• THEMES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildThemeGrid(){
  const saved=localStorage.getItem('omni_theme')||'cyber';
  g('themeGrid').innerHTML=THEMES.map(t=>`
    <div class="thcard ${t.id===saved?'active':''}" onclick="setTheme('${t.id}',this)">
      <div class="thprev" style="background:${t.prev}"></div>
      <div class="thname">${t.name}</div>
    </div>`).join('');
}
function setTheme(th,btn){
  document.documentElement.setAttribute('data-theme',th);
  localStorage.setItem('omni_theme',th);
  document.querySelectorAll('.thcard').forEach(c=>c.classList.remove('active'));
  btn.classList.add('active');
  setTimeout(loadDash,100);
  toast(`ğŸ¨ Ğ¢ĞµĞ¼Ğ°: ${THEMES.find(t=>t.id===th)?.name}`);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SETUP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showSetup(){g('sov').style.display='flex';g('su').value=CFG.url;g('sk').value=CFG.key;}
async function saveConfig(){
  const url=g('su').value.trim().replace(/\/$/,''),key=g('sk').value.trim();
  if(!url||!key)return;
  try{
    const r=await fetch(url+'/',{headers:{'X-Api-Key':key}});
    if(!r.ok)throw new Error('ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ ĞºĞ»ÑÑ‡ Ğ¸Ğ»Ğ¸ ÑĞµÑ€Ğ²ĞµÑ€ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½');
    localStorage.setItem('omni_url',url);localStorage.setItem('omni_key',key);
    g('sov').style.display='none';toast('âœ… ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾!');
  }catch(e){g('se').style.display='block';g('se').textContent='âŒ '+e.message;}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DRAG & DROP FILES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setupDragDrop(){
  document.querySelectorAll('.fdrop').forEach(drop=>{
    drop.addEventListener('dragover',e=>{e.preventDefault();drop.classList.add('dragover');});
    drop.addEventListener('dragleave',()=>drop.classList.remove('dragover'));
    drop.addEventListener('drop',e=>{
      e.preventDefault();drop.classList.remove('dragover');
      const file=e.dataTransfer.files[0];
      if(!file||!file.type.startsWith('image/'))return;
      const baseId=drop.id.replace('-fdrop','');
      handleFile({files:[file]},drop.id,baseId+'-purl',baseId+'-prev');
    });
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MODALS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function cls(id){g(id).style.display='none';}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• UTILS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function g(id){return document.getElementById(id);}
function toast(msg){
  const el=g('toastEl');el.textContent=msg;el.classList.add('show');
  clearTimeout(el._t);el._t=setTimeout(()=>el.classList.remove('show'),2600);
}
function pw(id,v){const e=g(id);if(e){requestAnimationFrame(()=>e.style.width=Math.min(100,v)+'%');}}
function cnt(id,target){
  const e=g(id);if(!e)return;let c=0;const s=Math.ceil(target/20)||1;
  const t=setInterval(()=>{c=Math.min(c+s,target);e.textContent=c;if(c>=target)clearInterval(t);},40);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SHAKE ANIMATION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const shakeStyle=document.createElement('style');
shakeStyle.textContent='@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-5px)}80%{transform:translateX(5px)}}';
document.head.appendChild(shakeStyle);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• START â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded', ()=>{
  const th=localStorage.getItem('omni_theme')||'cyber';
  document.documentElement.setAttribute('data-theme',th);
  drawQR();
  // Drag & drop setup delayed for sheets
  document.addEventListener('click', e=>{
    if(g('notifPanel').classList.contains('open')&&!g('notifPanel').contains(e.target)&&e.target.id!=='bellBtn'){
      g('notifPanel').classList.remove('open');
    }
  });
});

if(window.Telegram?.WebApp){window.Telegram.WebApp.expand();}
</script>
</body>
</html>
